module.exports=[23767,a=>{"use strict";var b=a.i(17123),c=a.i(41294),d=a.i(68135),e=a.i(60268),f=a.i(63327),g=a.i(68402),h=a.i(51442),i=a.i(63892),j=a.i(61483),k=a.i(21924),l=a.i(91252),m=a.i(59108);function n({ticket:a,onClose:d}){let e=(0,c.useRef)(null),f=`FAC-${a.ticket_id?.replace("SAV-","")}`,g=new Date().toLocaleDateString("fr-FR",{day:"2-digit",month:"long",year:"numeric"}),h=parseFloat(a.estimated_cost)||0,i=parseFloat(a.final_cost)||h,j=.19*i,k=i+j;return(0,b.jsx)("div",{className:"fixed inset-0 z-50 bg-black/50 flex items-start justify-center overflow-auto py-8 px-4",children:(0,b.jsxs)("div",{className:"bg-white rounded-2xl shadow-2xl max-w-[850px] w-full",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between p-4 border-b border-gray-200 no-print",children:[(0,b.jsx)("h2",{className:"text-lg font-bold text-gray-900",children:"Aper√ßu de la facture"}),(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsxs)("button",{onClick:function(){let b=e.current,c=window.open("","_blank","width=800,height=1000");c.document.write(`
      <!DOCTYPE html>
      <html lang="fr">
      <head>
        <meta charset="UTF-8">
        <title>Facture ${a.ticket_id}</title>
        <style>
          * { margin: 0; padding: 0; box-sizing: border-box; }
          body { font-family: 'Segoe UI', Arial, sans-serif; color: #1a1a1a; background: white; }
          @media print {
            body { -webkit-print-color-adjust: exact; print-color-adjust: exact; }
            .no-print { display: none !important; }
          }
          .invoice { max-width: 800px; margin: 0 auto; padding: 40px; }
          .header { display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 40px; padding-bottom: 20px; border-bottom: 3px solid #1e40af; }
          .logo-section { display: flex; align-items: center; gap: 16px; }
          .logo-section img { height: 100px; width: auto; object-fit: contain; }
          .company-info { font-size: 11px; color: #6b7280; line-height: 1.6; }
          .invoice-title { text-align: right; }
          .invoice-title h1 { font-size: 28px; color: #1e40af; font-weight: 800; letter-spacing: 2px; }
          .invoice-title .invoice-num { font-size: 13px; color: #6b7280; margin-top: 4px; }
          .invoice-title .invoice-date { font-size: 12px; color: #9ca3af; margin-top: 2px; }
          .section { margin-bottom: 24px; }
          .section-title { font-size: 11px; font-weight: 700; color: #1e40af; text-transform: uppercase; letter-spacing: 1.5px; margin-bottom: 12px; padding-bottom: 6px; border-bottom: 1px solid #e5e7eb; }
          .info-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; }
          .info-box { background: #f9fafb; border-radius: 8px; padding: 16px; }
          .info-box h3 { font-size: 11px; font-weight: 700; color: #6b7280; text-transform: uppercase; letter-spacing: 1px; margin-bottom: 8px; }
          .info-row { display: flex; justify-content: space-between; padding: 4px 0; font-size: 13px; }
          .info-row .label { color: #6b7280; }
          .info-row .value { font-weight: 600; color: #1a1a1a; }
          table { width: 100%; border-collapse: collapse; margin-top: 8px; }
          thead th { background: #1e40af; color: white; padding: 10px 14px; font-size: 11px; font-weight: 700; text-transform: uppercase; letter-spacing: 1px; text-align: left; }
          thead th:last-child { text-align: right; }
          tbody td { padding: 12px 14px; font-size: 13px; border-bottom: 1px solid #e5e7eb; }
          tbody td:last-child { text-align: right; font-weight: 600; }
          .totals { margin-top: 16px; display: flex; justify-content: flex-end; }
          .totals-box { width: 280px; }
          .total-row { display: flex; justify-content: space-between; padding: 8px 0; font-size: 13px; border-bottom: 1px solid #f3f4f6; }
          .total-row .label { color: #6b7280; }
          .total-row .value { font-weight: 600; }
          .total-row.grand { font-size: 16px; font-weight: 800; color: #1e40af; border-bottom: none; border-top: 2px solid #1e40af; padding-top: 12px; margin-top: 4px; }
          .footer { margin-top: 40px; padding-top: 20px; border-top: 1px solid #e5e7eb; text-align: center; font-size: 11px; color: #9ca3af; line-height: 1.8; }
          .notes { background: #eff6ff; border-radius: 8px; padding: 16px; margin-top: 24px; font-size: 12px; color: #1e40af; line-height: 1.6; }
          .stamp { margin-top: 30px; display: flex; justify-content: space-between; }
          .stamp-box { width: 200px; text-align: center; font-size: 11px; color: #6b7280; }
          .stamp-box .line { border-top: 1px solid #d1d5db; margin-top: 50px; padding-top: 6px; }
        </style>
      </head>
      <body>
        ${b.innerHTML}
        <script>window.onload = function() { window.print(); }</script>
      </body>
      </html>
    `),c.document.close()},className:"px-5 py-2 bg-blue-600 text-white rounded-lg text-sm font-medium hover:bg-blue-700 flex items-center gap-2",children:[(0,b.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 17h2a2 2 0 002-2v-4a2 2 0 00-2-2H5a2 2 0 00-2 2v4a2 2 0 002 2h2m2 4h6a2 2 0 002-2v-4a2 2 0 00-2-2H9a2 2 0 00-2 2v4a2 2 0 002 2zm8-12V5a2 2 0 00-2-2H9a2 2 0 00-2 2v4h10z"})}),"Imprimer"]}),(0,b.jsx)("button",{onClick:d,className:"px-4 py-2 bg-gray-100 text-gray-700 rounded-lg text-sm font-medium hover:bg-gray-200",children:"Fermer"})]})]}),(0,b.jsxs)("div",{ref:e,style:{padding:"40px",fontFamily:"'Segoe UI', Arial, sans-serif",color:"#1a1a1a"},children:[(0,b.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:40,paddingBottom:20,borderBottom:"3px solid #1e40af"},children:[(0,b.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:16},children:[(0,b.jsx)("img",{src:"/logo.jpg",alt:"Logo",style:{height:200,width:"auto",objectFit:"contain"}}),(0,b.jsxs)("div",{style:{fontSize:11,color:"#6b7280",lineHeight:1.6},children:[(0,b.jsx)("strong",{style:{fontSize:14,color:"#1a1a1a",display:"block"},children:"Informatica Company"}),"12, chemin Sidi Yahia, locale 14",(0,b.jsx)("br",{}),"Bir Mourad Ra√Øs, Alger, Alg√©rie",(0,b.jsx)("br",{}),"0793 27 23 79",(0,b.jsx)("br",{}),"contact@informaticacompany.com"]})]}),(0,b.jsxs)("div",{style:{textAlign:"right"},children:[(0,b.jsx)("h1",{style:{fontSize:28,color:"#1e40af",fontWeight:800,letterSpacing:2},children:"FACTURE"}),(0,b.jsx)("div",{style:{fontSize:13,color:"#6b7280",marginTop:4},children:f}),(0,b.jsxs)("div",{style:{fontSize:12,color:"#9ca3af",marginTop:2},children:["Date : ",g]})]})]}),(0,b.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:20,marginBottom:24},children:[(0,b.jsxs)("div",{style:{background:"#f9fafb",borderRadius:8,padding:16},children:[(0,b.jsx)("h3",{style:{fontSize:11,fontWeight:700,color:"#6b7280",textTransform:"uppercase",letterSpacing:1,marginBottom:8},children:"Client"}),(0,b.jsxs)("div",{style:{fontSize:13},children:[(0,b.jsx)("div",{style:{fontWeight:700,fontSize:14,marginBottom:4},children:a.client_name}),(0,b.jsxs)("div",{style:{color:"#6b7280"},children:[" ",a.client_phone]}),a.client_email&&(0,b.jsx)("div",{style:{color:"#6b7280"},children:a.client_email})]})]}),(0,b.jsxs)("div",{style:{background:"#f9fafb",borderRadius:8,padding:16},children:[(0,b.jsx)("h3",{style:{fontSize:11,fontWeight:700,color:"#6b7280",textTransform:"uppercase",letterSpacing:1,marginBottom:8},children:"Informations ticket"}),(0,b.jsxs)("div",{style:{fontSize:13},children:[(0,b.jsx)(o,{l:"N¬∞ Ticket",v:a.ticket_id}),(0,b.jsx)(o,{l:"Date cr√©ation",v:(0,l.formatDate)(a.created_at)}),(0,b.jsx)(o,{l:"Priorit√©",v:a.priority})]})]})]}),(0,b.jsxs)("div",{style:{marginBottom:24},children:[(0,b.jsx)("div",{style:{fontSize:11,fontWeight:700,color:"#1e40af",textTransform:"uppercase",letterSpacing:1.5,marginBottom:12,paddingBottom:6,borderBottom:"1px solid #e5e7eb"},children:"D√©tails de la prestation"}),(0,b.jsxs)("table",{style:{width:"100%",borderCollapse:"collapse"},children:[(0,b.jsx)("thead",{children:(0,b.jsxs)("tr",{children:[(0,b.jsx)("th",{style:{background:"#1e40af",color:"white",padding:"10px 14px",fontSize:11,fontWeight:700,textTransform:"uppercase",letterSpacing:1,textAlign:"left"},children:"Description"}),(0,b.jsx)("th",{style:{background:"#1e40af",color:"white",padding:"10px 14px",fontSize:11,fontWeight:700,textTransform:"uppercase",letterSpacing:1,textAlign:"left"},children:"Mat√©riel"}),(0,b.jsx)("th",{style:{background:"#1e40af",color:"white",padding:"10px 14px",fontSize:11,fontWeight:700,textTransform:"uppercase",letterSpacing:1,textAlign:"right"},children:"Montant HT"})]})}),(0,b.jsx)("tbody",{children:(0,b.jsxs)("tr",{children:[(0,b.jsxs)("td",{style:{padding:"12px 14px",fontSize:13,borderBottom:"1px solid #e5e7eb",verticalAlign:"top"},children:[(0,b.jsxs)("div",{style:{fontWeight:600,marginBottom:4},children:[(0,b.jsx)("span",{style:{display:"inline-flex",alignItems:"center",marginRight:8},children:(0,b.jsx)(m.default,{name:l.CATEGORY_ICONS[a.hardware_category],className:"w-5 h-5 text-slate-600"})}),"R√©paration / Maintenance"]}),(0,b.jsx)("div",{style:{fontSize:12,color:"#6b7280",lineHeight:1.5},children:a.problem_description}),a.diagnostic_notes&&(0,b.jsxs)("div",{style:{fontSize:11,color:"#9ca3af",marginTop:4},children:["Diagnostic : ",a.diagnostic_notes]})]}),(0,b.jsxs)("td",{style:{padding:"12px 14px",fontSize:13,borderBottom:"1px solid #e5e7eb",verticalAlign:"top"},children:[(0,b.jsx)("div",{children:l.CATEGORY_LABELS[a.hardware_category]||a.hardware_category}),(0,b.jsx)("div",{style:{fontSize:12,color:"#6b7280"},children:[a.brand,a.model].filter(Boolean).join(" ")||"‚Äî"}),a.serial_number&&(0,b.jsxs)("div",{style:{fontSize:11,color:"#9ca3af"},children:["S/N: ",a.serial_number]})]}),(0,b.jsx)("td",{style:{padding:"12px 14px",fontSize:13,borderBottom:"1px solid #e5e7eb",textAlign:"right",fontWeight:600,verticalAlign:"top"},children:i>0?`${i.toLocaleString("fr-DZ")} DA`:"‚Äî"})]})})]})]}),i>0&&(0,b.jsx)("div",{style:{display:"flex",justifyContent:"flex-end",marginBottom:24},children:(0,b.jsxs)("div",{style:{width:280},children:[(0,b.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",padding:"8px 0",fontSize:13,borderBottom:"1px solid #f3f4f6"},children:[(0,b.jsx)("span",{style:{color:"#6b7280"},children:"Total HT"}),(0,b.jsxs)("span",{style:{fontWeight:600},children:[i.toLocaleString("fr-DZ")," DA"]})]}),(0,b.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",padding:"8px 0",fontSize:13,borderBottom:"1px solid #f3f4f6"},children:[(0,b.jsx)("span",{style:{color:"#6b7280"},children:"TVA (19%)"}),(0,b.jsxs)("span",{style:{fontWeight:600},children:[j.toLocaleString("fr-DZ",{minimumFractionDigits:2})," ","DA"]})]}),(0,b.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",padding:"12px 0",fontSize:16,fontWeight:800,color:"#1e40af",borderTop:"2px solid #1e40af",marginTop:4},children:[(0,b.jsx)("span",{children:"Total TTC"}),(0,b.jsxs)("span",{children:[k.toLocaleString("fr-DZ",{minimumFractionDigits:2})," ","DA"]})]})]})}),a.technician_notes&&(0,b.jsxs)("div",{style:{background:"#eff6ff",borderRadius:8,padding:16,fontSize:12,color:"#1e40af",lineHeight:1.6,marginBottom:24},children:[(0,b.jsx)("strong",{children:"Notes :"})," ",a.technician_notes]}),(0,b.jsxs)("div",{style:{marginTop:30,display:"flex",justifyContent:"space-between"},children:[(0,b.jsx)("div",{style:{width:200,textAlign:"center",fontSize:11,color:"#6b7280"},children:(0,b.jsxs)("div",{style:{borderTop:"1px solid #d1d5db",marginTop:60,paddingTop:6},children:["Cachet et signature",(0,b.jsx)("br",{}),"de l'entreprise"]})}),(0,b.jsx)("div",{style:{width:200,textAlign:"center",fontSize:11,color:"#6b7280"},children:(0,b.jsx)("div",{style:{borderTop:"1px solid #d1d5db",marginTop:60,paddingTop:6},children:"Signature du client"})})]}),(0,b.jsxs)("div",{style:{marginTop:40,paddingTop:20,borderTop:"1px solid #e5e7eb",textAlign:"center",fontSize:11,color:"#9ca3af",lineHeight:1.8},children:["Informatica Company ‚Äî 12, chemin Sidi Yahia, locale 14, Bir Mourad Ra√Øs, Alger, Alg√©rie",(0,b.jsx)("br",{}),"0793 27 23 79 ‚Äî contact@informaticacompany.com",(0,b.jsx)("br",{}),"Merci pour votre confiance !"]})]})]})})}function o({l:a,v:c}){return(0,b.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",padding:"3px 0",fontSize:13},children:[(0,b.jsx)("span",{style:{color:"#6b7280"},children:a}),(0,b.jsx)("span",{style:{fontWeight:600},children:c})]})}var p=a.i(24849),q=a.i(86404);function r(){let a=(0,d.useParams)(),o=(0,d.useRouter)(),r=a.id,[u,v]=(0,c.useState)(null),[w,x]=(0,c.useState)(!0),[y,z]=(0,c.useState)(!1),[A,B]=(0,c.useState)({}),[C,D]=(0,c.useState)(!1),[E,F]=(0,c.useState)(null),[G,H]=(0,c.useState)(!1),{user:I}=(0,p.useAuth)(),J=(0,q.useToast)(),K=(0,q.useConfirm)();async function L(){x(!0);try{let a=await (0,f.getTicket)(r);v(a),B(a)}catch(a){F(a.message)}finally{x(!1)}}async function M(a){try{let b=await (0,f.updateTicketStatus)(r,{status:a});v(b)}catch(a){J({type:"error",message:a.data?.error||a.message})}}async function N(){D(!0);try{let a=await (0,f.updateTicket)(r,A);v(a),z(!1),J({type:"success",message:"Modifications enregistr√©es."})}catch(a){J({type:"error",message:a.data?.errors?.join("\n")||a.message})}finally{D(!1)}}async function O(){if(await K({title:"Supprimer le ticket",message:"√ätes-vous s√ªr de vouloir supprimer ce ticket ?",confirmText:"Supprimer",cancelText:"Annuler",danger:!0}))try{await (0,f.deleteTicket)(r),J({type:"success",message:"Ticket supprim√©."}),o.push("/tickets")}catch(a){J({type:"error",message:a.message||"Erreur lors de la suppression"})}}async function P(){if(await K({title:"Archiver le ticket",message:"Archiver ce ticket ?",confirmText:"Archiver",cancelText:"Annuler"}))try{await (0,f.archiveTicket)(r),J({type:"success",message:"Ticket archiv√©."}),o.push("/tickets")}catch(a){J({type:"error",message:a.message||"Erreur lors de l'archivage"})}}if((0,c.useEffect)(()=>{L()},[r]),w)return(0,b.jsx)(k.default,{message:"Chargement du ticket..."});if(E)return(0,b.jsxs)("div",{className:"text-center py-16",children:[(0,b.jsx)("p",{className:"text-red-500 mb-4",children:E}),(0,b.jsx)(e.default,{href:"/tickets",className:"text-blue-600 hover:underline text-sm",children:"‚Üê Retour aux tickets"})]});let Q=l.TRANSITIONS[u.status]||[];return(0,b.jsxs)("div",{className:"max-w-4xl mx-auto space-y-6",children:[G&&(0,b.jsx)(n,{ticket:u,onClose:()=>H(!1)}),(0,b.jsxs)("div",{children:[(0,b.jsxs)(e.default,{href:"/tickets",className:"text-sm text-gray-500 hover:text-blue-600 flex items-center gap-1 mb-3",children:[(0,b.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),"Retour aux tickets"]}),(0,b.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("h1",{className:"text-2xl font-bold text-gray-900 font-mono",children:u.ticket_id}),(0,b.jsx)(g.default,{status:u.status,size:"lg"}),(0,b.jsx)(h.default,{priority:u.priority})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[!y&&(0,b.jsxs)(b.Fragment,{children:[I?.role==="admin"&&(0,b.jsx)("button",{onClick:()=>H(!0),className:"px-3 py-2 text-sm bg-emerald-50 text-emerald-700 rounded-lg hover:bg-emerald-100 font-medium",children:"üßæ Facture"}),(0,b.jsxs)("button",{onClick:()=>z(!0),className:"px-3 py-2 text-sm bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 font-medium inline-flex items-center gap-2",children:[(0,b.jsx)(m.default,{name:"pencil",className:"w-4 h-4 text-gray-600"}),"Modifier"]})]}),"Delivered"===u.status&&(0,b.jsx)("button",{onClick:P,className:"px-3 py-2 text-sm bg-amber-50 text-amber-700 rounded-lg hover:bg-amber-100 font-medium",children:"üóÑÔ∏è Archiver"}),(0,b.jsxs)("button",{onClick:O,className:"px-3 py-2 text-sm bg-red-50 text-red-600 rounded-lg hover:bg-red-100 font-medium inline-flex items-center gap-2",children:[(0,b.jsx)(m.default,{name:"trash",className:"w-4 h-4 text-red-600"}),"Supprimer"]})]})]})]}),(0,b.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-5",children:[(0,b.jsx)("h3",{className:"text-sm font-semibold text-gray-500 uppercase tracking-wider mb-4",children:"Progression"}),(0,b.jsx)(i.default,{currentStatus:u.status}),Q.length>0&&(0,b.jsxs)("div",{className:"mt-4 pt-4 border-t border-gray-100 flex flex-wrap gap-2",children:[(0,b.jsx)("span",{className:"text-sm text-gray-500 mr-2 self-center",children:"Passer √† :"}),Q.map(a=>(0,b.jsxs)("button",{onClick:()=>M(a),className:`px-4 py-2 text-sm font-medium rounded-lg transition-colors ${"Completed"===a&&"Diagnostic"===u.status?"bg-green-600 text-white hover:bg-green-700":"bg-blue-600 text-white hover:bg-blue-700"}`,children:[l.STATUS_LABELS[a],"Completed"===a&&"Diagnostic"===u.status&&" ‚ö°"]},a))]})]}),(0,b.jsxs)("div",{className:"grid lg:grid-cols-3 gap-6",children:[(0,b.jsx)("div",{className:"lg:col-span-2 space-y-6",children:y?(0,b.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 space-y-4",children:[(0,b.jsx)("h3",{className:"font-semibold text-gray-900",children:"Modifier le ticket"}),(0,b.jsxs)("div",{className:"grid sm:grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"text-sm font-medium text-gray-700 block mb-1",children:"Nom client *"}),(0,b.jsx)("input",{value:A.client_name||"",onChange:a=>B({...A,client_name:a.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm outline-none focus:border-blue-500"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"text-sm font-medium text-gray-700 block mb-1",children:"T√©l√©phone *"}),(0,b.jsx)("input",{value:A.client_phone||"",onChange:a=>B({...A,client_phone:a.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm outline-none focus:border-blue-500"})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"text-sm font-medium text-gray-700 block mb-1",children:"Email"}),(0,b.jsx)("input",{value:A.client_email||"",onChange:a=>B({...A,client_email:a.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm outline-none focus:border-blue-500"})]}),(0,b.jsxs)("div",{className:"grid sm:grid-cols-3 gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"text-sm font-medium text-gray-700 block mb-1",children:"Cat√©gorie *"}),(0,b.jsx)("select",{value:A.hardware_category||"",onChange:a=>B({...A,hardware_category:a.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm outline-none focus:border-blue-500 bg-white",children:l.CATEGORIES.map(a=>(0,b.jsx)("option",{value:a,children:l.CATEGORY_LABELS[a]},a))})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"text-sm font-medium text-gray-700 block mb-1",children:"Marque"}),(0,b.jsx)("input",{value:A.brand||"",onChange:a=>B({...A,brand:a.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm outline-none focus:border-blue-500"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"text-sm font-medium text-gray-700 block mb-1",children:"Mod√®le"}),(0,b.jsx)("input",{value:A.model||"",onChange:a=>B({...A,model:a.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm outline-none focus:border-blue-500"})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"text-sm font-medium text-gray-700 block mb-1",children:"Description du probl√®me *"}),(0,b.jsx)("textarea",{value:A.problem_description||"",onChange:a=>B({...A,problem_description:a.target.value}),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm outline-none focus:border-blue-500"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"text-sm font-medium text-gray-700 block mb-1",children:"Notes diagnostic"}),(0,b.jsx)("textarea",{value:A.diagnostic_notes||"",onChange:a=>B({...A,diagnostic_notes:a.target.value}),rows:2,className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm outline-none focus:border-blue-500"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"text-sm font-medium text-gray-700 block mb-1",children:"Notes technicien"}),(0,b.jsx)("textarea",{value:A.technician_notes||"",onChange:a=>B({...A,technician_notes:a.target.value}),rows:2,className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm outline-none focus:border-blue-500"})]}),(0,b.jsxs)("div",{className:"grid sm:grid-cols-3 gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"text-sm font-medium text-gray-700 block mb-1",children:"Co√ªt estim√©"}),(0,b.jsx)("input",{type:"number",value:A.estimated_cost||"",onChange:a=>B({...A,estimated_cost:a.target.value||null}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm outline-none focus:border-blue-500"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"text-sm font-medium text-gray-700 block mb-1",children:"Co√ªt final"}),(0,b.jsx)("input",{type:"number",value:A.final_cost||"",onChange:a=>B({...A,final_cost:a.target.value||null}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm outline-none focus:border-blue-500"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"text-sm font-medium text-gray-700 block mb-1",children:"Priorit√©"}),(0,b.jsx)("select",{value:A.priority||"Normal",onChange:a=>B({...A,priority:a.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm outline-none focus:border-blue-500 bg-white",children:l.PRIORITIES.map(a=>(0,b.jsx)("option",{value:a,children:l.PRIORITY_LABELS[a]},a))})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"text-sm font-medium text-gray-700 block mb-1",children:"Emplacement"}),(0,b.jsx)("input",{value:A.location||"",onChange:a=>B({...A,location:a.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm outline-none focus:border-blue-500"})]}),(0,b.jsxs)("div",{className:"flex items-center gap-3 pt-3 border-t border-gray-100",children:[(0,b.jsx)("button",{onClick:N,disabled:C,className:"px-5 py-2 bg-blue-600 text-white rounded-lg text-sm font-medium hover:bg-blue-700 disabled:opacity-50",children:C?"Enregistrement...":"Enregistrer"}),(0,b.jsx)("button",{onClick:()=>{z(!1),B(u)},className:"px-5 py-2 bg-gray-100 text-gray-700 rounded-lg text-sm font-medium hover:bg-gray-200",children:"Annuler"})]})]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)(s,{title:"Informations client",children:[(0,b.jsx)(t,{label:"Nom",value:u.client_name}),(0,b.jsx)(t,{label:"T√©l√©phone",value:u.client_phone}),(0,b.jsx)(t,{label:"Email",value:u.client_email||"‚Äî"})]}),(0,b.jsxs)(s,{title:"Mat√©riel",children:[(0,b.jsx)(t,{label:"Cat√©gorie",value:(0,b.jsxs)("span",{className:"flex items-center gap-2",children:[(0,b.jsx)(m.default,{name:l.CATEGORY_ICONS[u.hardware_category],className:"w-5 h-5 text-slate-600"}),(0,b.jsx)("span",{children:l.CATEGORY_LABELS[u.hardware_category]})]})}),(0,b.jsx)(t,{label:"Marque",value:u.brand||"‚Äî"}),(0,b.jsx)(t,{label:"Mod√®le",value:u.model||"‚Äî"}),(0,b.jsx)(t,{label:"N¬∞ de s√©rie",value:u.serial_number||"‚Äî"}),(0,b.jsx)(t,{label:"Emplacement",value:u.location||"‚Äî"})]}),(0,b.jsxs)(s,{title:"Probl√®me & Notes",children:[(0,b.jsx)(t,{label:"Description",value:u.problem_description}),(0,b.jsx)(t,{label:"Diagnostic",value:u.diagnostic_notes||"‚Äî"}),(0,b.jsx)(t,{label:"Notes technicien",value:u.technician_notes||"‚Äî"})]}),(0,b.jsxs)(s,{title:"Co√ªts & Dates",children:[(0,b.jsx)(t,{label:"Co√ªt estim√©",value:(0,l.formatCurrency)(u.estimated_cost)}),(0,b.jsx)(t,{label:"Co√ªt final",value:(0,l.formatCurrency)(u.final_cost)}),(0,b.jsx)(t,{label:"Cr√©√© le",value:(0,l.formatDate)(u.created_at)}),(0,b.jsx)(t,{label:"Mis √† jour",value:(0,l.formatDate)(u.updated_at)}),u.delivered_at&&(0,b.jsx)(t,{label:"Livr√© le",value:(0,l.formatDate)(u.delivered_at)})]})]})}),(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-5 flex flex-col items-center",children:[(0,b.jsx)("h3",{className:"text-sm font-semibold text-gray-500 uppercase tracking-wider mb-4",children:"QR Code"}),(0,b.jsx)(j.default,{ticketId:u.ticket_id,size:140}),(0,b.jsx)("p",{className:"text-xs text-gray-400 mt-3 text-center",children:"Le client peut scanner ce code pour suivre sa r√©paration"})]}),(0,b.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-5",children:[(0,b.jsx)("h3",{className:"text-sm font-semibold text-gray-500 uppercase tracking-wider mb-4",children:"Historique"}),u.history&&u.history.length>0?(0,b.jsx)("div",{className:"space-y-3",children:u.history.map((a,c)=>(0,b.jsxs)("div",{className:"flex gap-3",children:[(0,b.jsxs)("div",{className:"flex flex-col items-center",children:[(0,b.jsx)("div",{className:"w-2.5 h-2.5 rounded-full bg-blue-500 mt-1.5"}),c<u.history.length-1&&(0,b.jsx)("div",{className:"w-px flex-1 bg-gray-200 mt-1"})]}),(0,b.jsxs)("div",{className:"pb-3",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 flex-wrap",children:[a.old_status&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("span",{className:"text-xs text-gray-400",children:l.STATUS_LABELS[a.old_status]||a.old_status}),(0,b.jsx)("span",{className:"text-xs text-gray-300",children:"‚Üí"})]}),(0,b.jsx)(g.default,{status:a.new_status})]}),(0,b.jsx)("p",{className:"text-xs text-gray-400 mt-0.5",children:(0,l.formatDate)(a.changed_at)}),a.notes&&(0,b.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:a.notes})]})]},c))}):(0,b.jsx)("p",{className:"text-sm text-gray-400 text-center py-4",children:"Aucun historique"})]})]})]})]})}function s({title:a,children:c}){return(0,b.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-5",children:[(0,b.jsx)("h3",{className:"text-sm font-semibold text-gray-500 uppercase tracking-wider mb-4",children:a}),(0,b.jsx)("div",{className:"space-y-3",children:c})]})}function t({label:a,value:c}){return(0,b.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-start gap-1 sm:gap-4",children:[(0,b.jsx)("span",{className:"text-sm font-medium text-gray-500 sm:w-32 flex-shrink-0",children:a}),(0,b.jsx)("span",{className:"text-sm text-gray-900 flex-1 whitespace-pre-wrap",children:c})]})}a.s(["default",()=>r],23767)}];

//# sourceMappingURL=sav-gestion-client_src_app_%28admin%29_tickets_%5Bid%5D_TicketDetailClient_2746a93c.js.map