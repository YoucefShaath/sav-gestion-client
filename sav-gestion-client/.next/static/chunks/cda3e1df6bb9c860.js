(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,3425,e=>{"use strict";let t=["Received","Diagnostic","In Progress","Completed","Delivered"];function r(e){return e?new Date(e).toLocaleDateString("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}):"‚Äî"}function i(e){return null==e?"‚Äî":new Intl.NumberFormat("fr-DZ",{style:"currency",currency:"DZD",minimumFractionDigits:0}).format(e)}function s(e){return t.indexOf(e)}function n(e){let t=e.replace(/[\s\-\.]/g,"");return/^(\+?\d{10,15})$/.test(t)}e.s(["BRANDS",0,["HP","Dell","Lenovo","Acer","Toshiba","Epson","Canon","Sharp","Kyocera","Lexmark","Dahua","Tenda","TP-Link","D-Link","TopLink","Enigma"],"CATEGORIES",0,["Laser Mono - Photocopieur","Laser Mono - MFP","Laser Couleur - Photocopieur","Laser Couleur - MFP","MFP Ink","Matricielle","Laptop","All In One","PC Bureaux","Serveur","Ecran","Reseau","Other"],"CATEGORY_GROUPS",0,[{group:"Imprimante",icon:"üñ®Ô∏è",items:["Laser Mono - Photocopieur","Laser Mono - MFP","Laser Couleur - Photocopieur","Laser Couleur - MFP","MFP Ink","Matricielle"]},{group:"Informatique",icon:"üíª",items:["Laptop","All In One","PC Bureaux","Serveur","Ecran","Reseau"]}],"CATEGORY_ICONS",0,{"Laser Mono - Photocopieur":"printer","Laser Mono - MFP":"printer","Laser Couleur - Photocopieur":"printer","Laser Couleur - MFP":"printer","MFP Ink":"printer",Matricielle:"printer",Laptop:"laptop","All In One":"laptop","PC Bureaux":"laptop",Serveur:"server",Ecran:"laptop",Reseau:"server",Other:"wrench"},"CATEGORY_LABELS",0,{"Laser Mono - Photocopieur":"Laser Mono ‚Äì Photocopieur","Laser Mono - MFP":"Laser Mono ‚Äì Imprimante MFP","Laser Couleur - Photocopieur":"Laser Couleur ‚Äì Photocopieur","Laser Couleur - MFP":"Laser Couleur ‚Äì Imprimante MFP","MFP Ink":"MFP Ink Cartouche / Bouteille",Matricielle:"Matricielle",Laptop:"Laptop","All In One":"All In One","PC Bureaux":"PC Bureaux",Serveur:"Serveur",Ecran:"√âcran",Reseau:"R√©seau",Other:"Autre"},"COMPUTER_CATEGORIES",0,["Laptop","All In One","PC Bureaux","Serveur"],"COMPUTER_PROBLEMS",0,["Disques durs (HDD / SSD)","Barrettes m√©moire (RAM)","Cartes m√®res","Alimentations","Cartes graphiques","Processeurs","Ventilateurs / Syst√®mes de refroidissement"],"PRIORITIES",0,["Low","Normal","High","Urgent"],"PRIORITY_COLORS",0,{Low:{bg:"bg-slate-100",text:"text-slate-600"},Normal:{bg:"bg-blue-50",text:"text-blue-600"},High:{bg:"bg-orange-100",text:"text-orange-700"},Urgent:{bg:"bg-red-100",text:"text-red-700"}},"PRIORITY_LABELS",0,{Low:"Basse",Normal:"Normale",High:"Haute",Urgent:"Urgente"},"STATUSES",0,t,"STATUS_COLORS",0,{Received:{bg:"bg-red-100",text:"text-red-700",dot:"bg-red-500"},Diagnostic:{bg:"bg-amber-100",text:"text-amber-700",dot:"bg-amber-500"},"In Progress":{bg:"bg-blue-100",text:"text-blue-700",dot:"bg-blue-500"},Completed:{bg:"bg-green-100",text:"text-green-700",dot:"bg-green-500"},Delivered:{bg:"bg-gray-100",text:"text-gray-600",dot:"bg-gray-400"}},"STATUS_LABELS",0,{Received:"Re√ßu",Diagnostic:"Diagnostic","In Progress":"En cours",Completed:"Termin√©",Delivered:"Livr√©"},"TRANSITIONS",0,{Received:["Diagnostic"],Diagnostic:["In Progress","Received","Completed"],"In Progress":["Completed","Diagnostic"],Completed:["Delivered","In Progress"],Delivered:[]},"formatCurrency",()=>i,"formatDate",()=>r,"getStatusStep",()=>s,"validatePhone",()=>n])},93714,8002,e=>{"use strict";var t=e.i(70524),r=e.i(3425);function i({status:e,size:i="sm"}){let s=r.STATUS_COLORS[e]||{bg:"bg-gray-100",text:"text-gray-600",dot:"bg-gray-400"},n=r.STATUS_LABELS[e]||e;return(0,t.jsxs)("span",{className:`inline-flex items-center gap-1.5 rounded-full font-semibold ${s.bg} ${s.text} ${"lg"===i?"px-3 py-1.5 text-sm":"px-2.5 py-0.5 text-xs"} transition-colors duration-300`,children:[(0,t.jsx)("span",{className:`w-1.5 h-1.5 rounded-full ${s.dot} transform transition-transform duration-300`}),n]})}function s({message:e="Chargement..."}){return(0,t.jsxs)("div",{className:"flex flex-col items-center justify-center py-16 gap-3",children:[(0,t.jsx)("div",{className:"w-8 h-8 border-3 border-blue-200 border-t-blue-600 rounded-full animate-spin"}),(0,t.jsx)("p",{className:"text-sm text-gray-500",children:e})]})}e.s(["default",()=>i],93714),e.s(["default",()=>s],8002)},83140,e=>{"use strict";var t=e.i(70524),r=e.i(3425);function i({priority:e}){let i=r.PRIORITY_COLORS[e]||{bg:"bg-gray-100",text:"text-gray-600"},s=r.PRIORITY_LABELS[e]||e;return(0,t.jsx)("span",{className:`inline-flex items-center px-2 py-0.5 rounded text-xs font-medium ${i.bg} ${i.text}`,children:s})}e.s(["default",()=>i])},53041,e=>{"use strict";let t,r;var i,s,n,a,l,o=e.i(70524),d=e.i(1411),c=Object.defineProperty,u=Object.getOwnPropertySymbols,m=Object.prototype.hasOwnProperty,h=Object.prototype.propertyIsEnumerable,g=(e,t,r)=>t in e?c(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,x=(e,t)=>{for(var r in t||(t={}))m.call(t,r)&&g(e,r,t[r]);if(u)for(var r of u(t))h.call(t,r)&&g(e,r,t[r]);return e},f=(e,t)=>{var r={};for(var i in e)m.call(e,i)&&0>t.indexOf(i)&&(r[i]=e[i]);if(null!=e&&u)for(var i of u(e))0>t.indexOf(i)&&h.call(e,i)&&(r[i]=e[i]);return r};(e=>{let t=class t{constructor(e,r,i,n){if(this.version=e,this.errorCorrectionLevel=r,this.modules=[],this.isFunction=[],e<t.MIN_VERSION||e>t.MAX_VERSION)throw RangeError("Version value out of range");if(n<-1||n>7)throw RangeError("Mask value out of range");this.size=4*e+17;let a=[];for(let e=0;e<this.size;e++)a.push(!1);for(let e=0;e<this.size;e++)this.modules.push(a.slice()),this.isFunction.push(a.slice());this.drawFunctionPatterns();const l=this.addEccAndInterleave(i);if(this.drawCodewords(l),-1==n){let e=1e9;for(let t=0;t<8;t++){this.applyMask(t),this.drawFormatBits(t);const r=this.getPenaltyScore();r<e&&(n=t,e=r),this.applyMask(t)}}s(0<=n&&n<=7),this.mask=n,this.applyMask(n),this.drawFormatBits(n),this.isFunction=[]}static encodeText(r,i){let s=e.QrSegment.makeSegments(r);return t.encodeSegments(s,i)}static encodeBinary(r,i){let s=e.QrSegment.makeBytes(r);return t.encodeSegments([s],i)}static encodeSegments(e,i,n=1,l=40,o=-1,d=!0){let c,u;if(!(t.MIN_VERSION<=n&&n<=l&&l<=t.MAX_VERSION)||o<-1||o>7)throw RangeError("Invalid value");for(c=n;;c++){let r=8*t.getNumDataCodewords(c,i),s=a.getTotalBits(e,c);if(s<=r){u=s;break}if(c>=l)throw RangeError("Data too long")}for(let e of[t.Ecc.MEDIUM,t.Ecc.QUARTILE,t.Ecc.HIGH])d&&u<=8*t.getNumDataCodewords(c,e)&&(i=e);let m=[];for(let t of e)for(let e of(r(t.mode.modeBits,4,m),r(t.numChars,t.mode.numCharCountBits(c),m),t.getData()))m.push(e);s(m.length==u);let h=8*t.getNumDataCodewords(c,i);s(m.length<=h),r(0,Math.min(4,h-m.length),m),r(0,(8-m.length%8)%8,m),s(m.length%8==0);for(let e=236;m.length<h;e^=253)r(e,8,m);let g=[];for(;8*g.length<m.length;)g.push(0);return m.forEach((e,t)=>g[t>>>3]|=e<<7-(7&t)),new t(c,i,g,o)}getModule(e,t){return 0<=e&&e<this.size&&0<=t&&t<this.size&&this.modules[t][e]}getModules(){return this.modules}drawFunctionPatterns(){for(let e=0;e<this.size;e++)this.setFunctionModule(6,e,e%2==0),this.setFunctionModule(e,6,e%2==0);this.drawFinderPattern(3,3),this.drawFinderPattern(this.size-4,3),this.drawFinderPattern(3,this.size-4);let e=this.getAlignmentPatternPositions(),t=e.length;for(let r=0;r<t;r++)for(let i=0;i<t;i++)(0!=r||0!=i)&&(0!=r||i!=t-1)&&(r!=t-1||0!=i)&&this.drawAlignmentPattern(e[r],e[i]);this.drawFormatBits(0),this.drawVersion()}drawFormatBits(e){let t=this.errorCorrectionLevel.formatBits<<3|e,r=t;for(let e=0;e<10;e++)r=r<<1^(r>>>9)*1335;let n=(t<<10|r)^21522;s(n>>>15==0);for(let e=0;e<=5;e++)this.setFunctionModule(8,e,i(n,e));this.setFunctionModule(8,7,i(n,6)),this.setFunctionModule(8,8,i(n,7)),this.setFunctionModule(7,8,i(n,8));for(let e=9;e<15;e++)this.setFunctionModule(14-e,8,i(n,e));for(let e=0;e<8;e++)this.setFunctionModule(this.size-1-e,8,i(n,e));for(let e=8;e<15;e++)this.setFunctionModule(8,this.size-15+e,i(n,e));this.setFunctionModule(8,this.size-8,!0)}drawVersion(){if(this.version<7)return;let e=this.version;for(let t=0;t<12;t++)e=e<<1^(e>>>11)*7973;let t=this.version<<12|e;s(t>>>18==0);for(let e=0;e<18;e++){let r=i(t,e),s=this.size-11+e%3,n=Math.floor(e/3);this.setFunctionModule(s,n,r),this.setFunctionModule(n,s,r)}}drawFinderPattern(e,t){for(let r=-4;r<=4;r++)for(let i=-4;i<=4;i++){let s=Math.max(Math.abs(i),Math.abs(r)),n=e+i,a=t+r;0<=n&&n<this.size&&0<=a&&a<this.size&&this.setFunctionModule(n,a,2!=s&&4!=s)}}drawAlignmentPattern(e,t){for(let r=-2;r<=2;r++)for(let i=-2;i<=2;i++)this.setFunctionModule(e+i,t+r,1!=Math.max(Math.abs(i),Math.abs(r)))}setFunctionModule(e,t,r){this.modules[t][e]=r,this.isFunction[t][e]=!0}addEccAndInterleave(e){let r=this.version,i=this.errorCorrectionLevel;if(e.length!=t.getNumDataCodewords(r,i))throw RangeError("Invalid argument");let n=t.NUM_ERROR_CORRECTION_BLOCKS[i.ordinal][r],a=t.ECC_CODEWORDS_PER_BLOCK[i.ordinal][r],l=Math.floor(t.getNumRawDataModules(r)/8),o=n-l%n,d=Math.floor(l/n),c=[],u=t.reedSolomonComputeDivisor(a);for(let r=0,i=0;r<n;r++){let s=e.slice(i,i+d-a+(r<o?0:1));i+=s.length;let n=t.reedSolomonComputeRemainder(s,u);r<o&&s.push(0),c.push(s.concat(n))}let m=[];for(let e=0;e<c[0].length;e++)c.forEach((t,r)=>{(e!=d-a||r>=o)&&m.push(t[e])});return s(m.length==l),m}drawCodewords(e){if(e.length!=Math.floor(t.getNumRawDataModules(this.version)/8))throw RangeError("Invalid argument");let r=0;for(let t=this.size-1;t>=1;t-=2){6==t&&(t=5);for(let s=0;s<this.size;s++)for(let n=0;n<2;n++){let a=t-n,l=(t+1&2)==0?this.size-1-s:s;!this.isFunction[l][a]&&r<8*e.length&&(this.modules[l][a]=i(e[r>>>3],7-(7&r)),r++)}}s(r==8*e.length)}applyMask(e){if(e<0||e>7)throw RangeError("Mask value out of range");for(let t=0;t<this.size;t++)for(let r=0;r<this.size;r++){let i;switch(e){case 0:i=(r+t)%2==0;break;case 1:i=t%2==0;break;case 2:i=r%3==0;break;case 3:i=(r+t)%3==0;break;case 4:i=(Math.floor(r/3)+Math.floor(t/2))%2==0;break;case 5:i=r*t%2+r*t%3==0;break;case 6:i=(r*t%2+r*t%3)%2==0;break;case 7:i=((r+t)%2+r*t%3)%2==0;break;default:throw Error("Unreachable")}!this.isFunction[t][r]&&i&&(this.modules[t][r]=!this.modules[t][r])}}getPenaltyScore(){let e=0;for(let r=0;r<this.size;r++){let i=!1,s=0,n=[0,0,0,0,0,0,0];for(let a=0;a<this.size;a++)this.modules[r][a]==i?5==++s?e+=t.PENALTY_N1:s>5&&e++:(this.finderPenaltyAddHistory(s,n),i||(e+=this.finderPenaltyCountPatterns(n)*t.PENALTY_N3),i=this.modules[r][a],s=1);e+=this.finderPenaltyTerminateAndCount(i,s,n)*t.PENALTY_N3}for(let r=0;r<this.size;r++){let i=!1,s=0,n=[0,0,0,0,0,0,0];for(let a=0;a<this.size;a++)this.modules[a][r]==i?5==++s?e+=t.PENALTY_N1:s>5&&e++:(this.finderPenaltyAddHistory(s,n),i||(e+=this.finderPenaltyCountPatterns(n)*t.PENALTY_N3),i=this.modules[a][r],s=1);e+=this.finderPenaltyTerminateAndCount(i,s,n)*t.PENALTY_N3}for(let r=0;r<this.size-1;r++)for(let i=0;i<this.size-1;i++){let s=this.modules[r][i];s==this.modules[r][i+1]&&s==this.modules[r+1][i]&&s==this.modules[r+1][i+1]&&(e+=t.PENALTY_N2)}let r=0;for(let e of this.modules)r=e.reduce((e,t)=>e+ +!!t,r);let i=this.size*this.size,n=Math.ceil(Math.abs(20*r-10*i)/i)-1;return s(0<=n&&n<=9),s(0<=(e+=n*t.PENALTY_N4)&&e<=2568888),e}getAlignmentPatternPositions(){if(1==this.version)return[];{let e=Math.floor(this.version/7)+2,t=32==this.version?26:2*Math.ceil((4*this.version+4)/(2*e-2)),r=[6];for(let i=this.size-7;r.length<e;i-=t)r.splice(1,0,i);return r}}static getNumRawDataModules(e){if(e<t.MIN_VERSION||e>t.MAX_VERSION)throw RangeError("Version number out of range");let r=(16*e+128)*e+64;if(e>=2){let t=Math.floor(e/7)+2;r-=(25*t-10)*t-55,e>=7&&(r-=36)}return s(208<=r&&r<=29648),r}static getNumDataCodewords(e,r){return Math.floor(t.getNumRawDataModules(e)/8)-t.ECC_CODEWORDS_PER_BLOCK[r.ordinal][e]*t.NUM_ERROR_CORRECTION_BLOCKS[r.ordinal][e]}static reedSolomonComputeDivisor(e){if(e<1||e>255)throw RangeError("Degree out of range");let r=[];for(let t=0;t<e-1;t++)r.push(0);r.push(1);let i=1;for(let s=0;s<e;s++){for(let e=0;e<r.length;e++)r[e]=t.reedSolomonMultiply(r[e],i),e+1<r.length&&(r[e]^=r[e+1]);i=t.reedSolomonMultiply(i,2)}return r}static reedSolomonComputeRemainder(e,r){let i=r.map(e=>0);for(let s of e){let e=s^i.shift();i.push(0),r.forEach((r,s)=>i[s]^=t.reedSolomonMultiply(r,e))}return i}static reedSolomonMultiply(e,t){if(e>>>8!=0||t>>>8!=0)throw RangeError("Byte out of range");let r=0;for(let i=7;i>=0;i--)r=r<<1^(r>>>7)*285^(t>>>i&1)*e;return s(r>>>8==0),r}finderPenaltyCountPatterns(e){let t=e[1];s(t<=3*this.size);let r=t>0&&e[2]==t&&e[3]==3*t&&e[4]==t&&e[5]==t;return(r&&e[0]>=4*t&&e[6]>=t?1:0)+(r&&e[6]>=4*t&&e[0]>=t?1:0)}finderPenaltyTerminateAndCount(e,t,r){return e&&(this.finderPenaltyAddHistory(t,r),t=0),t+=this.size,this.finderPenaltyAddHistory(t,r),this.finderPenaltyCountPatterns(r)}finderPenaltyAddHistory(e,t){0==t[0]&&(e+=this.size),t.pop(),t.unshift(e)}};function r(e,t,r){if(t<0||t>31||e>>>t!=0)throw RangeError("Value out of range");for(let i=t-1;i>=0;i--)r.push(e>>>i&1)}function i(e,t){return(e>>>t&1)!=0}function s(e){if(!e)throw Error("Assertion error")}t.MIN_VERSION=1,t.MAX_VERSION=40,t.PENALTY_N1=3,t.PENALTY_N2=3,t.PENALTY_N3=40,t.PENALTY_N4=10,t.ECC_CODEWORDS_PER_BLOCK=[[-1,7,10,15,20,26,18,20,24,30,18,20,24,26,30,22,24,28,30,28,28,28,28,30,30,26,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,10,16,26,18,24,16,18,22,22,26,30,22,22,24,24,28,28,26,26,26,26,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28],[-1,13,22,18,26,18,24,18,22,20,24,28,26,24,20,30,24,28,28,26,30,28,30,30,30,30,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,17,28,22,16,22,28,26,26,24,28,24,28,22,24,24,30,28,28,26,28,30,24,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30]],t.NUM_ERROR_CORRECTION_BLOCKS=[[-1,1,1,1,1,1,2,2,2,2,4,4,4,4,4,6,6,6,6,7,8,8,9,9,10,12,12,12,13,14,15,16,17,18,19,19,20,21,22,24,25],[-1,1,1,1,2,2,4,4,4,5,5,5,8,9,9,10,10,11,13,14,16,17,17,18,20,21,23,25,26,28,29,31,33,35,37,38,40,43,45,47,49],[-1,1,1,2,2,4,4,6,6,8,8,8,10,12,16,12,17,16,18,21,20,23,23,25,27,29,34,34,35,38,40,43,45,48,51,53,56,59,62,65,68],[-1,1,1,2,4,4,4,5,6,8,8,11,11,16,16,18,16,19,21,25,25,25,34,30,32,35,37,40,42,45,48,51,54,57,60,63,66,70,74,77,81]],e.QrCode=t;let n=class e{constructor(e,t,r){if(this.mode=e,this.numChars=t,this.bitData=r,t<0)throw RangeError("Invalid argument");this.bitData=r.slice()}static makeBytes(t){let i=[];for(let e of t)r(e,8,i);return new e(e.Mode.BYTE,t.length,i)}static makeNumeric(t){if(!e.isNumeric(t))throw RangeError("String contains non-numeric characters");let i=[];for(let e=0;e<t.length;){let s=Math.min(t.length-e,3);r(parseInt(t.substring(e,e+s),10),3*s+1,i),e+=s}return new e(e.Mode.NUMERIC,t.length,i)}static makeAlphanumeric(t){let i;if(!e.isAlphanumeric(t))throw RangeError("String contains unencodable characters in alphanumeric mode");let s=[];for(i=0;i+2<=t.length;i+=2){let n=45*e.ALPHANUMERIC_CHARSET.indexOf(t.charAt(i));r(n+=e.ALPHANUMERIC_CHARSET.indexOf(t.charAt(i+1)),11,s)}return i<t.length&&r(e.ALPHANUMERIC_CHARSET.indexOf(t.charAt(i)),6,s),new e(e.Mode.ALPHANUMERIC,t.length,s)}static makeSegments(t){return""==t?[]:e.isNumeric(t)?[e.makeNumeric(t)]:e.isAlphanumeric(t)?[e.makeAlphanumeric(t)]:[e.makeBytes(e.toUtf8ByteArray(t))]}static makeEci(t){let i=[];if(t<0)throw RangeError("ECI assignment value out of range");if(t<128)r(t,8,i);else if(t<16384)r(2,2,i),r(t,14,i);else if(t<1e6)r(6,3,i),r(t,21,i);else throw RangeError("ECI assignment value out of range");return new e(e.Mode.ECI,0,i)}static isNumeric(t){return e.NUMERIC_REGEX.test(t)}static isAlphanumeric(t){return e.ALPHANUMERIC_REGEX.test(t)}getData(){return this.bitData.slice()}static getTotalBits(e,t){let r=0;for(let i of e){let e=i.mode.numCharCountBits(t);if(i.numChars>=1<<e)return 1/0;r+=4+e+i.bitData.length}return r}static toUtf8ByteArray(e){e=encodeURI(e);let t=[];for(let r=0;r<e.length;r++)"%"!=e.charAt(r)?t.push(e.charCodeAt(r)):(t.push(parseInt(e.substring(r+1,r+3),16)),r+=2);return t}};n.NUMERIC_REGEX=/^[0-9]*$/,n.ALPHANUMERIC_REGEX=/^[A-Z0-9 $%*+.\/:-]*$/,n.ALPHANUMERIC_CHARSET="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:";let a=n;e.QrSegment=n})(l||(l={})),s=(i=l||(l={})).QrCode||(i.QrCode={}),(t=class{constructor(e,t){this.ordinal=e,this.formatBits=t}}).LOW=new t(0,1),t.MEDIUM=new t(1,0),t.QUARTILE=new t(2,3),t.HIGH=new t(3,2),s.Ecc=t,a=(n=l||(l={})).QrSegment||(n.QrSegment={}),(r=class{constructor(e,t){this.modeBits=e,this.numBitsCharCount=t}numCharCountBits(e){return this.numBitsCharCount[Math.floor((e+7)/17)]}}).NUMERIC=new r(1,[10,12,14]),r.ALPHANUMERIC=new r(2,[9,11,13]),r.BYTE=new r(4,[8,16,16]),r.KANJI=new r(8,[8,10,12]),r.ECI=new r(7,[0,0,0]),a.Mode=r;var p=l,b={L:p.QrCode.Ecc.LOW,M:p.QrCode.Ecc.MEDIUM,Q:p.QrCode.Ecc.QUARTILE,H:p.QrCode.Ecc.HIGH},y="#FFFFFF",v="#000000";function j(e,t=0){let r=[];return e.forEach(function(e,i){let s=null;e.forEach(function(n,a){if(!n&&null!==s){r.push(`M${s+t} ${i+t}h${a-s}v1H${s+t}z`),s=null;return}if(a===e.length-1){if(!n)return;null===s?r.push(`M${a+t},${i+t} h1v1H${a+t}z`):r.push(`M${s+t},${i+t} h${a+1-s}v1H${s+t}z`);return}n&&null===s&&(s=a)})}),r.join("")}function w(e,t){return e.slice().map((e,r)=>r<t.y||r>=t.y+t.h?e:e.map((e,r)=>(r<t.x||r>=t.x+t.w)&&e))}function C({value:e,level:t,minVersion:r,includeMargin:i,marginSize:s,imageSettings:n,size:a,boostLevel:l}){let o=d.default.useMemo(()=>{let i=(Array.isArray(e)?e:[e]).reduce((e,t)=>(e.push(...p.QrSegment.makeSegments(t)),e),[]);return p.QrCode.encodeSegments(i,b[t],r,void 0,void 0,l)},[e,t,r,l]),{cells:c,margin:u,numCells:m,calculatedImageSettings:h}=d.default.useMemo(()=>{let e=o.getModules(),t=null!=s?Math.max(Math.floor(s),0):4*!!i,r=e.length+2*t,l=function(e,t,r,i){if(null==i)return null;let s=e.length+2*r,n=Math.floor(.1*t),a=s/t,l=(i.width||n)*a,o=(i.height||n)*a,d=null==i.x?e.length/2-l/2:i.x*a,c=null==i.y?e.length/2-o/2:i.y*a,u=null==i.opacity?1:i.opacity,m=null;if(i.excavate){let e=Math.floor(d),t=Math.floor(c),r=Math.ceil(l+d-e),i=Math.ceil(o+c-t);m={x:e,y:t,w:r,h:i}}return{x:d,y:c,h:o,w:l,excavation:m,opacity:u,crossOrigin:i.crossOrigin}}(e,a,t,n);return{cells:e,margin:t,numCells:r,calculatedImageSettings:l}},[o,a,n,i,s]);return{qrcode:o,margin:u,cells:c,numCells:m,calculatedImageSettings:h}}var N=function(){try{new Path2D().addPath(new Path2D)}catch(e){return!1}return!0}();d.default.forwardRef(function(e,t){let{value:r,size:i=128,level:s="L",bgColor:n=y,fgColor:a=v,includeMargin:l=!1,minVersion:o=1,boostLevel:c,marginSize:u,imageSettings:m}=e,h=f(e,["value","size","level","bgColor","fgColor","includeMargin","minVersion","boostLevel","marginSize","imageSettings"]),{style:g}=h,p=f(h,["style"]),b=null==m?void 0:m.src,S=d.default.useRef(null),E=d.default.useRef(null),M=d.default.useCallback(e=>{S.current=e,"function"==typeof t?t(e):t&&(t.current=e)},[t]),[A,R]=d.default.useState(!1),{margin:T,cells:_,numCells:P,calculatedImageSettings:L}=C({value:r,level:s,minVersion:o,boostLevel:c,includeMargin:l,marginSize:u,imageSettings:m,size:i});d.default.useEffect(()=>{if(null!=S.current){let e=S.current,t=e.getContext("2d");if(!t)return;let r=_,s=E.current,l=null!=L&&null!==s&&s.complete&&0!==s.naturalHeight&&0!==s.naturalWidth;l&&null!=L.excavation&&(r=w(_,L.excavation));let o=window.devicePixelRatio||1;e.height=e.width=i*o;let d=i/P*o;t.scale(d,d),t.fillStyle=n,t.fillRect(0,0,P,P),t.fillStyle=a,N?t.fill(new Path2D(j(r,T))):_.forEach(function(e,r){e.forEach(function(e,i){e&&t.fillRect(i+T,r+T,1,1)})}),L&&(t.globalAlpha=L.opacity),l&&t.drawImage(s,L.x+T,L.y+T,L.w,L.h)}}),d.default.useEffect(()=>{R(!1)},[b]);let k=x({height:i,width:i},g),I=null;return null!=b&&(I=d.default.createElement("img",{src:b,key:b,style:{display:"none"},onLoad:()=>{R(!0)},ref:E,crossOrigin:null==L?void 0:L.crossOrigin})),d.default.createElement(d.default.Fragment,null,d.default.createElement("canvas",x({style:k,height:i,width:i,ref:M,role:"img"},p)),I)}).displayName="QRCodeCanvas";var S=d.default.forwardRef(function(e,t){let{value:r,size:i=128,level:s="L",bgColor:n=y,fgColor:a=v,includeMargin:l=!1,minVersion:o=1,boostLevel:c,title:u,marginSize:m,imageSettings:h}=e,g=f(e,["value","size","level","bgColor","fgColor","includeMargin","minVersion","boostLevel","title","marginSize","imageSettings"]),{margin:p,cells:b,numCells:N,calculatedImageSettings:S}=C({value:r,level:s,minVersion:o,boostLevel:c,includeMargin:l,marginSize:m,imageSettings:h,size:i}),E=b,M=null;null!=h&&null!=S&&(null!=S.excavation&&(E=w(b,S.excavation)),M=d.default.createElement("image",{href:h.src,height:S.h,width:S.w,x:S.x+p,y:S.y+p,preserveAspectRatio:"none",opacity:S.opacity,crossOrigin:S.crossOrigin}));let A=j(E,p);return d.default.createElement("svg",x({height:i,width:i,viewBox:`0 0 ${N} ${N}`,ref:t,role:"img"},g),!!u&&d.default.createElement("title",null,u),d.default.createElement("path",{fill:n,d:`M0,0 h${N}v${N}H0z`,shapeRendering:"crispEdges"}),d.default.createElement("path",{fill:a,d:A,shapeRendering:"crispEdges"}),M)});function E({ticketId:e,size:t=128}){let r=`${window.location.origin}/track/${e}`;return(0,o.jsxs)("div",{className:"flex flex-col items-center gap-2",children:[(0,o.jsx)("div",{className:"p-3 bg-white rounded-xl shadow-sm border border-gray-200",children:(0,o.jsx)(S,{value:r,size:t,level:"M",includeMargin:!1,bgColor:"#ffffff",fgColor:"#0f172a"})}),(0,o.jsx)("span",{className:"text-xs text-gray-500 font-mono",children:e})]})}S.displayName="QRCodeSVG",e.s(["default",()=>E],53041)},55241,e=>{"use strict";var t=e.i(70524),r=e.i(3425);function i({currentStatus:e}){let i=(0,r.getStatusStep)(e);return(0,t.jsx)("div",{className:"flex items-center w-full",children:r.STATUSES.map((e,s)=>{let n=s<i,a=s===i,l=r.STATUS_COLORS[e];return(0,t.jsxs)("div",{className:"flex items-center flex-1 last:flex-initial",children:[(0,t.jsxs)("div",{className:"flex flex-col items-center",children:[(0,t.jsx)("div",{className:`w-8 h-8 rounded-full flex items-center justify-center text-xs font-bold border-2 transition-all
                  ${n?"bg-green-500 border-green-500 text-white":a?`${l.bg} ${l.text} border-current`:"bg-gray-100 border-gray-300 text-gray-400"}`,children:n?"‚úì":s+1}),(0,t.jsx)("span",{className:`mt-1 text-[10px] font-medium text-center leading-tight
                ${a?l.text:n?"text-green-600":"text-gray-400"}`,children:r.STATUS_LABELS[e]})]}),s<r.STATUSES.length-1&&(0,t.jsx)("div",{className:`flex-1 h-0.5 mx-1 ${n?"bg-green-400":"bg-gray-200"}`})]},e)})})}e.s(["default",()=>i])},75837,e=>{"use strict";var t=e.i(70524),r=e.i(1411),i=e.i(69823),s=e.i(97529),n=e.i(73623),a=e.i(93714),l=e.i(83140),o=e.i(55241),d=e.i(53041),c=e.i(8002),u=e.i(3425),m=e.i(37321);function h({ticket:e,onClose:i}){let s=(0,r.useRef)(null),n=`FAC-${e.ticket_id?.replace("SAV-","")}`,a=new Date().toLocaleDateString("fr-FR",{day:"2-digit",month:"long",year:"numeric"}),l=parseFloat(e.estimated_cost)||0,o=parseFloat(e.final_cost)||l,d=.19*o,c=o+d;return(0,t.jsx)("div",{className:"fixed inset-0 z-50 bg-black/50 flex items-start justify-center overflow-auto py-8 px-4",children:(0,t.jsxs)("div",{className:"bg-white rounded-2xl shadow-2xl max-w-[850px] w-full",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between p-4 border-b border-gray-200 no-print",children:[(0,t.jsx)("h2",{className:"text-lg font-bold text-gray-900",children:"Aper√ßu de la facture"}),(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsxs)("button",{onClick:function(){let t=s.current,r=window.open("","_blank","width=800,height=1000");r.document.write(`
      <!DOCTYPE html>
      <html lang="fr">
      <head>
        <meta charset="UTF-8">
        <title>Facture ${e.ticket_id}</title>
        <style>
          * { margin: 0; padding: 0; box-sizing: border-box; }
          body { font-family: 'Segoe UI', Arial, sans-serif; color: #1a1a1a; background: white; }
          @media print {
            body { -webkit-print-color-adjust: exact; print-color-adjust: exact; }
            .no-print { display: none !important; }
          }
          .invoice { max-width: 800px; margin: 0 auto; padding: 40px; }
          .header { display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 40px; padding-bottom: 20px; border-bottom: 3px solid #1e40af; }
          .logo-section { display: flex; align-items: center; gap: 16px; }
          .logo-section img { height: 100px; width: auto; object-fit: contain; }
          .company-info { font-size: 11px; color: #6b7280; line-height: 1.6; }
          .invoice-title { text-align: right; }
          .invoice-title h1 { font-size: 28px; color: #1e40af; font-weight: 800; letter-spacing: 2px; }
          .invoice-title .invoice-num { font-size: 13px; color: #6b7280; margin-top: 4px; }
          .invoice-title .invoice-date { font-size: 12px; color: #9ca3af; margin-top: 2px; }
          .section { margin-bottom: 24px; }
          .section-title { font-size: 11px; font-weight: 700; color: #1e40af; text-transform: uppercase; letter-spacing: 1.5px; margin-bottom: 12px; padding-bottom: 6px; border-bottom: 1px solid #e5e7eb; }
          .info-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; }
          .info-box { background: #f9fafb; border-radius: 8px; padding: 16px; }
          .info-box h3 { font-size: 11px; font-weight: 700; color: #6b7280; text-transform: uppercase; letter-spacing: 1px; margin-bottom: 8px; }
          .info-row { display: flex; justify-content: space-between; padding: 4px 0; font-size: 13px; }
          .info-row .label { color: #6b7280; }
          .info-row .value { font-weight: 600; color: #1a1a1a; }
          table { width: 100%; border-collapse: collapse; margin-top: 8px; }
          thead th { background: #1e40af; color: white; padding: 10px 14px; font-size: 11px; font-weight: 700; text-transform: uppercase; letter-spacing: 1px; text-align: left; }
          thead th:last-child { text-align: right; }
          tbody td { padding: 12px 14px; font-size: 13px; border-bottom: 1px solid #e5e7eb; }
          tbody td:last-child { text-align: right; font-weight: 600; }
          .totals { margin-top: 16px; display: flex; justify-content: flex-end; }
          .totals-box { width: 280px; }
          .total-row { display: flex; justify-content: space-between; padding: 8px 0; font-size: 13px; border-bottom: 1px solid #f3f4f6; }
          .total-row .label { color: #6b7280; }
          .total-row .value { font-weight: 600; }
          .total-row.grand { font-size: 16px; font-weight: 800; color: #1e40af; border-bottom: none; border-top: 2px solid #1e40af; padding-top: 12px; margin-top: 4px; }
          .footer { margin-top: 40px; padding-top: 20px; border-top: 1px solid #e5e7eb; text-align: center; font-size: 11px; color: #9ca3af; line-height: 1.8; }
          .notes { background: #eff6ff; border-radius: 8px; padding: 16px; margin-top: 24px; font-size: 12px; color: #1e40af; line-height: 1.6; }
          .stamp { margin-top: 30px; display: flex; justify-content: space-between; }
          .stamp-box { width: 200px; text-align: center; font-size: 11px; color: #6b7280; }
          .stamp-box .line { border-top: 1px solid #d1d5db; margin-top: 50px; padding-top: 6px; }
        </style>
      </head>
      <body>
        ${t.innerHTML}
        <script>window.onload = function() { window.print(); }</script>
      </body>
      </html>
    `),r.document.close()},className:"px-5 py-2 bg-blue-600 text-white rounded-lg text-sm font-medium hover:bg-blue-700 flex items-center gap-2",children:[(0,t.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 17h2a2 2 0 002-2v-4a2 2 0 00-2-2H5a2 2 0 00-2 2v4a2 2 0 002 2h2m2 4h6a2 2 0 002-2v-4a2 2 0 00-2-2H9a2 2 0 00-2 2v4a2 2 0 002 2zm8-12V5a2 2 0 00-2-2H9a2 2 0 00-2 2v4h10z"})}),"Imprimer"]}),(0,t.jsx)("button",{onClick:i,className:"px-4 py-2 bg-gray-100 text-gray-700 rounded-lg text-sm font-medium hover:bg-gray-200",children:"Fermer"})]})]}),(0,t.jsxs)("div",{ref:s,style:{padding:"40px",fontFamily:"'Segoe UI', Arial, sans-serif",color:"#1a1a1a"},children:[(0,t.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:40,paddingBottom:20,borderBottom:"3px solid #1e40af"},children:[(0,t.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:16},children:[(0,t.jsx)("img",{src:"/logo.jpg",alt:"Logo",style:{height:200,width:"auto",objectFit:"contain"}}),(0,t.jsxs)("div",{style:{fontSize:11,color:"#6b7280",lineHeight:1.6},children:[(0,t.jsx)("strong",{style:{fontSize:14,color:"#1a1a1a",display:"block"},children:"Informatica Company"}),"12, chemin Sidi Yahia, locale 14",(0,t.jsx)("br",{}),"Bir Mourad Ra√Øs, Alger, Alg√©rie",(0,t.jsx)("br",{}),"0793 27 23 79",(0,t.jsx)("br",{}),"contact@informaticacompany.com"]})]}),(0,t.jsxs)("div",{style:{textAlign:"right"},children:[(0,t.jsx)("h1",{style:{fontSize:28,color:"#1e40af",fontWeight:800,letterSpacing:2},children:"FACTURE"}),(0,t.jsx)("div",{style:{fontSize:13,color:"#6b7280",marginTop:4},children:n}),(0,t.jsxs)("div",{style:{fontSize:12,color:"#9ca3af",marginTop:2},children:["Date : ",a]})]})]}),(0,t.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:20,marginBottom:24},children:[(0,t.jsxs)("div",{style:{background:"#f9fafb",borderRadius:8,padding:16},children:[(0,t.jsx)("h3",{style:{fontSize:11,fontWeight:700,color:"#6b7280",textTransform:"uppercase",letterSpacing:1,marginBottom:8},children:"Client"}),(0,t.jsxs)("div",{style:{fontSize:13},children:[(0,t.jsx)("div",{style:{fontWeight:700,fontSize:14,marginBottom:4},children:e.client_name}),(0,t.jsxs)("div",{style:{color:"#6b7280"},children:[" ",e.client_phone]}),e.client_email&&(0,t.jsx)("div",{style:{color:"#6b7280"},children:e.client_email})]})]}),(0,t.jsxs)("div",{style:{background:"#f9fafb",borderRadius:8,padding:16},children:[(0,t.jsx)("h3",{style:{fontSize:11,fontWeight:700,color:"#6b7280",textTransform:"uppercase",letterSpacing:1,marginBottom:8},children:"Informations ticket"}),(0,t.jsxs)("div",{style:{fontSize:13},children:[(0,t.jsx)(g,{l:"N¬∞ Ticket",v:e.ticket_id}),(0,t.jsx)(g,{l:"Date cr√©ation",v:(0,u.formatDate)(e.created_at)}),(0,t.jsx)(g,{l:"Priorit√©",v:e.priority})]})]})]}),(0,t.jsxs)("div",{style:{marginBottom:24},children:[(0,t.jsx)("div",{style:{fontSize:11,fontWeight:700,color:"#1e40af",textTransform:"uppercase",letterSpacing:1.5,marginBottom:12,paddingBottom:6,borderBottom:"1px solid #e5e7eb"},children:"D√©tails de la prestation"}),(0,t.jsxs)("table",{style:{width:"100%",borderCollapse:"collapse"},children:[(0,t.jsx)("thead",{children:(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{style:{background:"#1e40af",color:"white",padding:"10px 14px",fontSize:11,fontWeight:700,textTransform:"uppercase",letterSpacing:1,textAlign:"left"},children:"Description"}),(0,t.jsx)("th",{style:{background:"#1e40af",color:"white",padding:"10px 14px",fontSize:11,fontWeight:700,textTransform:"uppercase",letterSpacing:1,textAlign:"left"},children:"Mat√©riel"}),(0,t.jsx)("th",{style:{background:"#1e40af",color:"white",padding:"10px 14px",fontSize:11,fontWeight:700,textTransform:"uppercase",letterSpacing:1,textAlign:"right"},children:"Montant HT"})]})}),(0,t.jsx)("tbody",{children:(0,t.jsxs)("tr",{children:[(0,t.jsxs)("td",{style:{padding:"12px 14px",fontSize:13,borderBottom:"1px solid #e5e7eb",verticalAlign:"top"},children:[(0,t.jsxs)("div",{style:{fontWeight:600,marginBottom:4},children:[(0,t.jsx)("span",{style:{display:"inline-flex",alignItems:"center",marginRight:8},children:(0,t.jsx)(m.default,{name:u.CATEGORY_ICONS[e.hardware_category],className:"w-5 h-5 text-slate-600"})}),"R√©paration / Maintenance"]}),(0,t.jsx)("div",{style:{fontSize:12,color:"#6b7280",lineHeight:1.5},children:e.problem_description}),e.diagnostic_notes&&(0,t.jsxs)("div",{style:{fontSize:11,color:"#9ca3af",marginTop:4},children:["Diagnostic : ",e.diagnostic_notes]})]}),(0,t.jsxs)("td",{style:{padding:"12px 14px",fontSize:13,borderBottom:"1px solid #e5e7eb",verticalAlign:"top"},children:[(0,t.jsx)("div",{children:u.CATEGORY_LABELS[e.hardware_category]||e.hardware_category}),(0,t.jsx)("div",{style:{fontSize:12,color:"#6b7280"},children:[e.brand,e.model].filter(Boolean).join(" ")||"‚Äî"}),e.serial_number&&(0,t.jsxs)("div",{style:{fontSize:11,color:"#9ca3af"},children:["S/N: ",e.serial_number]})]}),(0,t.jsx)("td",{style:{padding:"12px 14px",fontSize:13,borderBottom:"1px solid #e5e7eb",textAlign:"right",fontWeight:600,verticalAlign:"top"},children:o>0?`${o.toLocaleString("fr-DZ")} DA`:"‚Äî"})]})})]})]}),o>0&&(0,t.jsx)("div",{style:{display:"flex",justifyContent:"flex-end",marginBottom:24},children:(0,t.jsxs)("div",{style:{width:280},children:[(0,t.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",padding:"8px 0",fontSize:13,borderBottom:"1px solid #f3f4f6"},children:[(0,t.jsx)("span",{style:{color:"#6b7280"},children:"Total HT"}),(0,t.jsxs)("span",{style:{fontWeight:600},children:[o.toLocaleString("fr-DZ")," DA"]})]}),(0,t.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",padding:"8px 0",fontSize:13,borderBottom:"1px solid #f3f4f6"},children:[(0,t.jsx)("span",{style:{color:"#6b7280"},children:"TVA (19%)"}),(0,t.jsxs)("span",{style:{fontWeight:600},children:[d.toLocaleString("fr-DZ",{minimumFractionDigits:2})," ","DA"]})]}),(0,t.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",padding:"12px 0",fontSize:16,fontWeight:800,color:"#1e40af",borderTop:"2px solid #1e40af",marginTop:4},children:[(0,t.jsx)("span",{children:"Total TTC"}),(0,t.jsxs)("span",{children:[c.toLocaleString("fr-DZ",{minimumFractionDigits:2})," ","DA"]})]})]})}),e.technician_notes&&(0,t.jsxs)("div",{style:{background:"#eff6ff",borderRadius:8,padding:16,fontSize:12,color:"#1e40af",lineHeight:1.6,marginBottom:24},children:[(0,t.jsx)("strong",{children:"Notes :"})," ",e.technician_notes]}),(0,t.jsxs)("div",{style:{marginTop:30,display:"flex",justifyContent:"space-between"},children:[(0,t.jsx)("div",{style:{width:200,textAlign:"center",fontSize:11,color:"#6b7280"},children:(0,t.jsxs)("div",{style:{borderTop:"1px solid #d1d5db",marginTop:60,paddingTop:6},children:["Cachet et signature",(0,t.jsx)("br",{}),"de l'entreprise"]})}),(0,t.jsx)("div",{style:{width:200,textAlign:"center",fontSize:11,color:"#6b7280"},children:(0,t.jsx)("div",{style:{borderTop:"1px solid #d1d5db",marginTop:60,paddingTop:6},children:"Signature du client"})})]}),(0,t.jsxs)("div",{style:{marginTop:40,paddingTop:20,borderTop:"1px solid #e5e7eb",textAlign:"center",fontSize:11,color:"#9ca3af",lineHeight:1.8},children:["Informatica Company ‚Äî 12, chemin Sidi Yahia, locale 14, Bir Mourad Ra√Øs, Alger, Alg√©rie",(0,t.jsx)("br",{}),"0793 27 23 79 ‚Äî contact@informaticacompany.com",(0,t.jsx)("br",{}),"Merci pour votre confiance !"]})]})]})})}function g({l:e,v:r}){return(0,t.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",padding:"3px 0",fontSize:13},children:[(0,t.jsx)("span",{style:{color:"#6b7280"},children:e}),(0,t.jsx)("span",{style:{fontWeight:600},children:r})]})}var x=e.i(49420),f=e.i(36273);function p(){let e=(0,i.useParams)(),g=(0,i.useRouter)(),p=e.id,[v,j]=(0,r.useState)(null),[w,C]=(0,r.useState)(!0),[N,S]=(0,r.useState)(!1),[E,M]=(0,r.useState)({}),[A,R]=(0,r.useState)(!1),[T,_]=(0,r.useState)(null),[P,L]=(0,r.useState)(!1),{user:k}=(0,x.useAuth)(),I=(0,f.useToast)(),O=(0,f.useConfirm)();async function z(){C(!0);try{let e=await (0,n.getTicket)(p);j(e),M(e)}catch(e){_(e.message)}finally{C(!1)}}async function D(e){try{let t=await (0,n.updateTicketStatus)(p,{status:e});j(t)}catch(e){I({type:"error",message:e.data?.error||e.message})}}async function B(){R(!0);try{let e=await (0,n.updateTicket)(p,E);j(e),S(!1),I({type:"success",message:"Modifications enregistr√©es."})}catch(e){I({type:"error",message:e.data?.errors?.join("\n")||e.message})}finally{R(!1)}}async function F(){if(await O({title:"Supprimer le ticket",message:"√ätes-vous s√ªr de vouloir supprimer ce ticket ?",confirmText:"Supprimer",cancelText:"Annuler",danger:!0}))try{await (0,n.deleteTicket)(p),I({type:"success",message:"Ticket supprim√©."}),g.push("/tickets")}catch(e){I({type:"error",message:e.message||"Erreur lors de la suppression"})}}async function U(){if(await O({title:"Archiver le ticket",message:"Archiver ce ticket ?",confirmText:"Archiver",cancelText:"Annuler"}))try{await (0,n.archiveTicket)(p),I({type:"success",message:"Ticket archiv√©."}),g.push("/tickets")}catch(e){I({type:"error",message:e.message||"Erreur lors de l'archivage"})}}if((0,r.useEffect)(()=>{z()},[p]),w)return(0,t.jsx)(c.default,{message:"Chargement du ticket..."});if(T)return(0,t.jsxs)("div",{className:"text-center py-16",children:[(0,t.jsx)("p",{className:"text-red-500 mb-4",children:T}),(0,t.jsx)(s.default,{href:"/tickets",className:"text-blue-600 hover:underline text-sm",children:"‚Üê Retour aux tickets"})]});let H=u.TRANSITIONS[v.status]||[];return(0,t.jsxs)("div",{className:"max-w-4xl mx-auto space-y-6",children:[P&&(0,t.jsx)(h,{ticket:v,onClose:()=>L(!1)}),(0,t.jsxs)("div",{children:[(0,t.jsxs)(s.default,{href:"/tickets",className:"text-sm text-gray-500 hover:text-blue-600 flex items-center gap-1 mb-3",children:[(0,t.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),"Retour aux tickets"]}),(0,t.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("h1",{className:"text-2xl font-bold text-gray-900 font-mono",children:v.ticket_id}),(0,t.jsx)(a.default,{status:v.status,size:"lg"}),(0,t.jsx)(l.default,{priority:v.priority})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[!N&&(0,t.jsxs)(t.Fragment,{children:[k?.role==="admin"&&(0,t.jsx)("button",{onClick:()=>L(!0),className:"px-3 py-2 text-sm bg-emerald-50 text-emerald-700 rounded-lg hover:bg-emerald-100 font-medium",children:"üßæ Facture"}),(0,t.jsxs)("button",{onClick:()=>S(!0),className:"px-3 py-2 text-sm bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 font-medium inline-flex items-center gap-2",children:[(0,t.jsx)(m.default,{name:"pencil",className:"w-4 h-4 text-gray-600"}),"Modifier"]})]}),"Delivered"===v.status&&(0,t.jsx)("button",{onClick:U,className:"px-3 py-2 text-sm bg-amber-50 text-amber-700 rounded-lg hover:bg-amber-100 font-medium",children:"üóÑÔ∏è Archiver"}),(0,t.jsxs)("button",{onClick:F,className:"px-3 py-2 text-sm bg-red-50 text-red-600 rounded-lg hover:bg-red-100 font-medium inline-flex items-center gap-2",children:[(0,t.jsx)(m.default,{name:"trash",className:"w-4 h-4 text-red-600"}),"Supprimer"]})]})]})]}),(0,t.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-5",children:[(0,t.jsx)("h3",{className:"text-sm font-semibold text-gray-500 uppercase tracking-wider mb-4",children:"Progression"}),(0,t.jsx)(o.default,{currentStatus:v.status}),H.length>0&&(0,t.jsxs)("div",{className:"mt-4 pt-4 border-t border-gray-100 flex flex-wrap gap-2",children:[(0,t.jsx)("span",{className:"text-sm text-gray-500 mr-2 self-center",children:"Passer √† :"}),H.map(e=>(0,t.jsxs)("button",{onClick:()=>D(e),className:`px-4 py-2 text-sm font-medium rounded-lg transition-colors ${"Completed"===e&&"Diagnostic"===v.status?"bg-green-600 text-white hover:bg-green-700":"bg-blue-600 text-white hover:bg-blue-700"}`,children:[u.STATUS_LABELS[e],"Completed"===e&&"Diagnostic"===v.status&&" ‚ö°"]},e))]})]}),(0,t.jsxs)("div",{className:"grid lg:grid-cols-3 gap-6",children:[(0,t.jsx)("div",{className:"lg:col-span-2 space-y-6",children:N?(0,t.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 space-y-4",children:[(0,t.jsx)("h3",{className:"font-semibold text-gray-900",children:"Modifier le ticket"}),(0,t.jsxs)("div",{className:"grid sm:grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-sm font-medium text-gray-700 block mb-1",children:"Nom client *"}),(0,t.jsx)("input",{value:E.client_name||"",onChange:e=>M({...E,client_name:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm outline-none focus:border-blue-500"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-sm font-medium text-gray-700 block mb-1",children:"T√©l√©phone *"}),(0,t.jsx)("input",{value:E.client_phone||"",onChange:e=>M({...E,client_phone:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm outline-none focus:border-blue-500"})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-sm font-medium text-gray-700 block mb-1",children:"Email"}),(0,t.jsx)("input",{value:E.client_email||"",onChange:e=>M({...E,client_email:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm outline-none focus:border-blue-500"})]}),(0,t.jsxs)("div",{className:"grid sm:grid-cols-3 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-sm font-medium text-gray-700 block mb-1",children:"Cat√©gorie *"}),(0,t.jsx)("select",{value:E.hardware_category||"",onChange:e=>M({...E,hardware_category:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm outline-none focus:border-blue-500 bg-white",children:u.CATEGORIES.map(e=>(0,t.jsx)("option",{value:e,children:u.CATEGORY_LABELS[e]},e))})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-sm font-medium text-gray-700 block mb-1",children:"Marque"}),(0,t.jsx)("input",{value:E.brand||"",onChange:e=>M({...E,brand:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm outline-none focus:border-blue-500"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-sm font-medium text-gray-700 block mb-1",children:"Mod√®le"}),(0,t.jsx)("input",{value:E.model||"",onChange:e=>M({...E,model:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm outline-none focus:border-blue-500"})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-sm font-medium text-gray-700 block mb-1",children:"Description du probl√®me *"}),(0,t.jsx)("textarea",{value:E.problem_description||"",onChange:e=>M({...E,problem_description:e.target.value}),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm outline-none focus:border-blue-500"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-sm font-medium text-gray-700 block mb-1",children:"Notes diagnostic"}),(0,t.jsx)("textarea",{value:E.diagnostic_notes||"",onChange:e=>M({...E,diagnostic_notes:e.target.value}),rows:2,className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm outline-none focus:border-blue-500"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-sm font-medium text-gray-700 block mb-1",children:"Notes technicien"}),(0,t.jsx)("textarea",{value:E.technician_notes||"",onChange:e=>M({...E,technician_notes:e.target.value}),rows:2,className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm outline-none focus:border-blue-500"})]}),(0,t.jsxs)("div",{className:"grid sm:grid-cols-3 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-sm font-medium text-gray-700 block mb-1",children:"Co√ªt estim√©"}),(0,t.jsx)("input",{type:"number",value:E.estimated_cost||"",onChange:e=>M({...E,estimated_cost:e.target.value||null}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm outline-none focus:border-blue-500"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-sm font-medium text-gray-700 block mb-1",children:"Co√ªt final"}),(0,t.jsx)("input",{type:"number",value:E.final_cost||"",onChange:e=>M({...E,final_cost:e.target.value||null}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm outline-none focus:border-blue-500"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-sm font-medium text-gray-700 block mb-1",children:"Priorit√©"}),(0,t.jsx)("select",{value:E.priority||"Normal",onChange:e=>M({...E,priority:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm outline-none focus:border-blue-500 bg-white",children:u.PRIORITIES.map(e=>(0,t.jsx)("option",{value:e,children:u.PRIORITY_LABELS[e]},e))})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-sm font-medium text-gray-700 block mb-1",children:"Emplacement"}),(0,t.jsx)("input",{value:E.location||"",onChange:e=>M({...E,location:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm outline-none focus:border-blue-500"})]}),(0,t.jsxs)("div",{className:"flex items-center gap-3 pt-3 border-t border-gray-100",children:[(0,t.jsx)("button",{onClick:B,disabled:A,className:"px-5 py-2 bg-blue-600 text-white rounded-lg text-sm font-medium hover:bg-blue-700 disabled:opacity-50",children:A?"Enregistrement...":"Enregistrer"}),(0,t.jsx)("button",{onClick:()=>{S(!1),M(v)},className:"px-5 py-2 bg-gray-100 text-gray-700 rounded-lg text-sm font-medium hover:bg-gray-200",children:"Annuler"})]})]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(b,{title:"Informations client",children:[(0,t.jsx)(y,{label:"Nom",value:v.client_name}),(0,t.jsx)(y,{label:"T√©l√©phone",value:v.client_phone}),(0,t.jsx)(y,{label:"Email",value:v.client_email||"‚Äî"})]}),(0,t.jsxs)(b,{title:"Mat√©riel",children:[(0,t.jsx)(y,{label:"Cat√©gorie",value:(0,t.jsxs)("span",{className:"flex items-center gap-2",children:[(0,t.jsx)(m.default,{name:u.CATEGORY_ICONS[v.hardware_category],className:"w-5 h-5 text-slate-600"}),(0,t.jsx)("span",{children:u.CATEGORY_LABELS[v.hardware_category]})]})}),(0,t.jsx)(y,{label:"Marque",value:v.brand||"‚Äî"}),(0,t.jsx)(y,{label:"Mod√®le",value:v.model||"‚Äî"}),(0,t.jsx)(y,{label:"N¬∞ de s√©rie",value:v.serial_number||"‚Äî"}),(0,t.jsx)(y,{label:"Emplacement",value:v.location||"‚Äî"})]}),(0,t.jsxs)(b,{title:"Probl√®me & Notes",children:[(0,t.jsx)(y,{label:"Description",value:v.problem_description}),(0,t.jsx)(y,{label:"Diagnostic",value:v.diagnostic_notes||"‚Äî"}),(0,t.jsx)(y,{label:"Notes technicien",value:v.technician_notes||"‚Äî"})]}),(0,t.jsxs)(b,{title:"Co√ªts & Dates",children:[(0,t.jsx)(y,{label:"Co√ªt estim√©",value:(0,u.formatCurrency)(v.estimated_cost)}),(0,t.jsx)(y,{label:"Co√ªt final",value:(0,u.formatCurrency)(v.final_cost)}),(0,t.jsx)(y,{label:"Cr√©√© le",value:(0,u.formatDate)(v.created_at)}),(0,t.jsx)(y,{label:"Mis √† jour",value:(0,u.formatDate)(v.updated_at)}),v.delivered_at&&(0,t.jsx)(y,{label:"Livr√© le",value:(0,u.formatDate)(v.delivered_at)})]})]})}),(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-5 flex flex-col items-center",children:[(0,t.jsx)("h3",{className:"text-sm font-semibold text-gray-500 uppercase tracking-wider mb-4",children:"QR Code"}),(0,t.jsx)(d.default,{ticketId:v.ticket_id,size:140}),(0,t.jsx)("p",{className:"text-xs text-gray-400 mt-3 text-center",children:"Le client peut scanner ce code pour suivre sa r√©paration"})]}),(0,t.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-5",children:[(0,t.jsx)("h3",{className:"text-sm font-semibold text-gray-500 uppercase tracking-wider mb-4",children:"Historique"}),v.history&&v.history.length>0?(0,t.jsx)("div",{className:"space-y-3",children:v.history.map((e,r)=>(0,t.jsxs)("div",{className:"flex gap-3",children:[(0,t.jsxs)("div",{className:"flex flex-col items-center",children:[(0,t.jsx)("div",{className:"w-2.5 h-2.5 rounded-full bg-blue-500 mt-1.5"}),r<v.history.length-1&&(0,t.jsx)("div",{className:"w-px flex-1 bg-gray-200 mt-1"})]}),(0,t.jsxs)("div",{className:"pb-3",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 flex-wrap",children:[e.old_status&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("span",{className:"text-xs text-gray-400",children:u.STATUS_LABELS[e.old_status]||e.old_status}),(0,t.jsx)("span",{className:"text-xs text-gray-300",children:"‚Üí"})]}),(0,t.jsx)(a.default,{status:e.new_status})]}),(0,t.jsx)("p",{className:"text-xs text-gray-400 mt-0.5",children:(0,u.formatDate)(e.changed_at)}),e.notes&&(0,t.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:e.notes})]})]},r))}):(0,t.jsx)("p",{className:"text-sm text-gray-400 text-center py-4",children:"Aucun historique"})]})]})]})]})}function b({title:e,children:r}){return(0,t.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-5",children:[(0,t.jsx)("h3",{className:"text-sm font-semibold text-gray-500 uppercase tracking-wider mb-4",children:e}),(0,t.jsx)("div",{className:"space-y-3",children:r})]})}function y({label:e,value:r}){return(0,t.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-start gap-1 sm:gap-4",children:[(0,t.jsx)("span",{className:"text-sm font-medium text-gray-500 sm:w-32 flex-shrink-0",children:e}),(0,t.jsx)("span",{className:"text-sm text-gray-900 flex-1 whitespace-pre-wrap",children:r})]})}e.s(["default",()=>p],75837)}]);