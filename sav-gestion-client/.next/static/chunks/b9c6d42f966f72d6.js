(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,3425,e=>{"use strict";let t=["Received","Diagnostic","In Progress","Completed","Delivered"];function r(e){return e?new Date(e).toLocaleDateString("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}):"â€”"}function s(e){return null==e?"â€”":new Intl.NumberFormat("fr-DZ",{style:"currency",currency:"DZD",minimumFractionDigits:0}).format(e)}function a(e){return t.indexOf(e)}function i(e){let t=e.replace(/[\s\-\.]/g,"");return/^(\+?\d{10,15})$/.test(t)}e.s(["BRANDS",0,["HP","Dell","Lenovo","Acer","Toshiba","Epson","Canon","Sharp","Kyocera","Lexmark","Dahua","Tenda","TP-Link","D-Link","TopLink","Enigma"],"CATEGORIES",0,["Laser Mono - Photocopieur","Laser Mono - MFP","Laser Couleur - Photocopieur","Laser Couleur - MFP","MFP Ink","Matricielle","Laptop","All In One","PC Bureaux","Serveur","Ecran","Reseau","Other"],"CATEGORY_GROUPS",0,[{group:"Imprimante",icon:"ðŸ–¨ï¸",items:["Laser Mono - Photocopieur","Laser Mono - MFP","Laser Couleur - Photocopieur","Laser Couleur - MFP","MFP Ink","Matricielle"]},{group:"Informatique",icon:"ðŸ’»",items:["Laptop","All In One","PC Bureaux","Serveur","Ecran","Reseau"]}],"CATEGORY_ICONS",0,{"Laser Mono - Photocopieur":"printer","Laser Mono - MFP":"printer","Laser Couleur - Photocopieur":"printer","Laser Couleur - MFP":"printer","MFP Ink":"printer",Matricielle:"printer",Laptop:"laptop","All In One":"laptop","PC Bureaux":"laptop",Serveur:"server",Ecran:"laptop",Reseau:"server",Other:"wrench"},"CATEGORY_LABELS",0,{"Laser Mono - Photocopieur":"Laser Mono â€“ Photocopieur","Laser Mono - MFP":"Laser Mono â€“ Imprimante MFP","Laser Couleur - Photocopieur":"Laser Couleur â€“ Photocopieur","Laser Couleur - MFP":"Laser Couleur â€“ Imprimante MFP","MFP Ink":"MFP Ink Cartouche / Bouteille",Matricielle:"Matricielle",Laptop:"Laptop","All In One":"All In One","PC Bureaux":"PC Bureaux",Serveur:"Serveur",Ecran:"Ã‰cran",Reseau:"RÃ©seau",Other:"Autre"},"COMPUTER_CATEGORIES",0,["Laptop","All In One","PC Bureaux","Serveur"],"COMPUTER_PROBLEMS",0,["Disques durs (HDD / SSD)","Barrettes mÃ©moire (RAM)","Cartes mÃ¨res","Alimentations","Cartes graphiques","Processeurs","Ventilateurs / SystÃ¨mes de refroidissement"],"PRIORITIES",0,["Low","Normal","High","Urgent"],"PRIORITY_COLORS",0,{Low:{bg:"bg-slate-100",text:"text-slate-600"},Normal:{bg:"bg-blue-50",text:"text-blue-600"},High:{bg:"bg-orange-100",text:"text-orange-700"},Urgent:{bg:"bg-red-100",text:"text-red-700"}},"PRIORITY_LABELS",0,{Low:"Basse",Normal:"Normale",High:"Haute",Urgent:"Urgente"},"STATUSES",0,t,"STATUS_COLORS",0,{Received:{bg:"bg-red-100",text:"text-red-700",dot:"bg-red-500"},Diagnostic:{bg:"bg-amber-100",text:"text-amber-700",dot:"bg-amber-500"},"In Progress":{bg:"bg-blue-100",text:"text-blue-700",dot:"bg-blue-500"},Completed:{bg:"bg-green-100",text:"text-green-700",dot:"bg-green-500"},Delivered:{bg:"bg-gray-100",text:"text-gray-600",dot:"bg-gray-400"}},"STATUS_LABELS",0,{Received:"ReÃ§u",Diagnostic:"Diagnostic","In Progress":"En cours",Completed:"TerminÃ©",Delivered:"LivrÃ©"},"TRANSITIONS",0,{Received:["Diagnostic"],Diagnostic:["In Progress","Received","Completed"],"In Progress":["Completed","Diagnostic"],Completed:["Delivered","In Progress"],Delivered:[]},"formatCurrency",()=>s,"formatDate",()=>r,"getStatusStep",()=>a,"validatePhone",()=>i])},93714,8002,e=>{"use strict";var t=e.i(70524),r=e.i(3425);function s({status:e,size:s="sm"}){let a=r.STATUS_COLORS[e]||{bg:"bg-gray-100",text:"text-gray-600",dot:"bg-gray-400"},i=r.STATUS_LABELS[e]||e;return(0,t.jsxs)("span",{className:`inline-flex items-center gap-1.5 rounded-full font-semibold ${a.bg} ${a.text} ${"lg"===s?"px-3 py-1.5 text-sm":"px-2.5 py-0.5 text-xs"} transition-colors duration-300`,children:[(0,t.jsx)("span",{className:`w-1.5 h-1.5 rounded-full ${a.dot} transform transition-transform duration-300`}),i]})}function a({message:e="Chargement..."}){return(0,t.jsxs)("div",{className:"flex flex-col items-center justify-center py-16 gap-3",children:[(0,t.jsx)("div",{className:"w-8 h-8 border-3 border-blue-200 border-t-blue-600 rounded-full animate-spin"}),(0,t.jsx)("p",{className:"text-sm text-gray-500",children:e})]})}e.s(["default",()=>s],93714),e.s(["default",()=>a],8002)},83140,e=>{"use strict";var t=e.i(70524),r=e.i(3425);function s({priority:e}){let s=r.PRIORITY_COLORS[e]||{bg:"bg-gray-100",text:"text-gray-600"},a=r.PRIORITY_LABELS[e]||e;return(0,t.jsx)("span",{className:`inline-flex items-center px-2 py-0.5 rounded text-xs font-medium ${s.bg} ${s.text}`,children:a})}e.s(["default",()=>s])},97435,e=>{"use strict";var t=e.i(70524);function r({icon:e="ðŸ“‹",title:r,message:s,action:a}){return(0,t.jsxs)("div",{className:"flex flex-col items-center justify-center py-16 text-center",children:[(0,t.jsx)("span",{className:"text-5xl mb-4",children:e}),(0,t.jsx)("h3",{className:"text-lg font-semibold text-gray-700 mb-1",children:r}),(0,t.jsx)("p",{className:"text-sm text-gray-500 mb-4 max-w-sm",children:s}),a]})}e.s(["default",()=>r])},98438,e=>{"use strict";var t=e.i(70524),r=e.i(1411),s=e.i(97529),a=e.i(69823),i=e.i(73623),n=e.i(93714),l=e.i(83140),o=e.i(8002),c=e.i(97435),d=e.i(3425),u=e.i(37321),x=e.i(36273);function m(){return(0,t.jsx)(r.Suspense,{fallback:(0,t.jsx)(o.default,{}),children:(0,t.jsx)(p,{})})}function p(){let e=(0,a.useSearchParams)(),[m,p]=(0,r.useState)([]),[h,g]=(0,r.useState)(0),[b,f]=(0,r.useState)(1),[y,j]=(0,r.useState)(1),[v,N]=(0,r.useState)(!0),[k,S]=(0,r.useState)(e.get("status")||""),[L,C]=(0,r.useState)(""),[w,T]=(0,r.useState)(""),P=(0,x.useToast)(),A=(0,x.useConfirm)(),R=(0,r.useCallback)(async()=>{N(!0);try{let e={page:b};k&&(e.status=k),L&&(e.category=L),w&&(e.search=w);let t=await (0,i.getTickets)(e);p(t.data||[]),g(t.total||0),j(t.pages||1)}catch{p([])}finally{N(!1)}},[b,k,L,w]);async function M(e){if(await A({title:"Supprimer le ticket",message:`Supprimer le ticket ${e} ?`,confirmText:"Supprimer",cancelText:"Annuler",danger:!0}))try{await (0,i.deleteTicket)(e),P({type:"success",message:`Ticket ${e} supprim\xe9.`}),R()}catch(e){P({type:"error",message:e.message||"Erreur lors de la suppression"})}}async function O(e){if(await A({title:"Archiver le ticket",message:`Archiver le ticket ${e} ?`,confirmText:"Archiver",cancelText:"Annuler"}))try{await (0,i.archiveTicket)(e),P({type:"success",message:`Ticket ${e} archiv\xe9.`}),R()}catch(e){P({type:"error",message:e.message||"Erreur lors de l'archivage"})}}return(0,r.useEffect)(()=>{R()},[R]),(0,t.jsxs)("div",{className:"space-y-5",children:[(0,t.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Tickets"}),(0,t.jsxs)("p",{className:"text-sm text-gray-500 mt-1",children:[h," ticket",1!==h?"s":""," au total"]})]}),(0,t.jsxs)(s.default,{href:"/new-ticket",className:"inline-flex items-center gap-2 px-4 py-2.5 bg-blue-600 text-white rounded-lg hover:bg-blue-700 font-medium text-sm shadow-sm",children:[(0,t.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Nouveau ticket"]})]}),(0,t.jsx)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-4",children:(0,t.jsxs)("div",{className:"flex flex-col sm:flex-row gap-3",children:[(0,t.jsx)("div",{className:"flex-1",children:(0,t.jsx)("input",{type:"text",value:w,onChange:e=>{T(e.target.value),f(1)},placeholder:"Rechercher par nom, tÃ©lÃ©phone ou ID...",className:"w-full px-3.5 py-2 rounded-lg border border-gray-300 text-sm outline-none focus:border-blue-500 focus:ring-2 focus:ring-blue-100"})}),(0,t.jsxs)("select",{value:k,onChange:e=>{S(e.target.value),f(1)},className:"px-3 py-2 rounded-lg border border-gray-300 text-sm outline-none focus:border-blue-500 bg-white",children:[(0,t.jsx)("option",{value:"",children:"Tous les statuts"}),d.STATUSES.map(e=>(0,t.jsx)("option",{value:e,children:d.STATUS_LABELS[e]},e))]}),(0,t.jsxs)("select",{value:L,onChange:e=>{C(e.target.value),f(1)},className:"px-3 py-2 rounded-lg border border-gray-300 text-sm outline-none focus:border-blue-500 bg-white",children:[(0,t.jsx)("option",{value:"",children:"Toutes catÃ©gories"}),d.CATEGORIES.map(e=>(0,t.jsx)("option",{value:e,children:d.CATEGORY_LABELS[e]},e))]})]})}),v?(0,t.jsx)(o.default,{}):0===m.length?(0,t.jsx)(c.default,{icon:"ðŸŽ«",title:"Aucun ticket trouvÃ©",message:"Modifiez vos filtres ou crÃ©ez un nouveau ticket.",action:(0,t.jsx)(s.default,{href:"/new-ticket",className:"px-4 py-2 bg-blue-600 text-white rounded-lg text-sm font-medium hover:bg-blue-700",children:"CrÃ©er un ticket"})}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"hidden lg:block bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",children:(0,t.jsxs)("table",{className:"w-full",children:[(0,t.jsx)("thead",{children:(0,t.jsxs)("tr",{className:"bg-gray-50 border-b border-gray-200",children:[(0,t.jsx)("th",{className:"text-left px-5 py-3 text-xs font-semibold text-gray-500 uppercase tracking-wider",children:"Ticket"}),(0,t.jsx)("th",{className:"text-left px-5 py-3 text-xs font-semibold text-gray-500 uppercase tracking-wider",children:"Client"}),(0,t.jsx)("th",{className:"text-left px-5 py-3 text-xs font-semibold text-gray-500 uppercase tracking-wider",children:"MatÃ©riel"}),(0,t.jsx)("th",{className:"text-left px-5 py-3 text-xs font-semibold text-gray-500 uppercase tracking-wider",children:"Statut"}),(0,t.jsx)("th",{className:"text-left px-5 py-3 text-xs font-semibold text-gray-500 uppercase tracking-wider",children:"PrioritÃ©"}),(0,t.jsx)("th",{className:"text-left px-5 py-3 text-xs font-semibold text-gray-500 uppercase tracking-wider",children:"Date"}),(0,t.jsx)("th",{className:"text-right px-5 py-3 text-xs font-semibold text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),(0,t.jsx)("tbody",{className:"divide-y divide-gray-100",children:m.map(e=>(0,t.jsxs)("tr",{className:"hover:bg-gray-50 transition-colors",children:[(0,t.jsx)("td",{className:"px-5 py-3.5",children:(0,t.jsx)(s.default,{href:`/tickets/${e.ticket_id}`,className:"text-sm font-mono font-semibold text-blue-600 hover:text-blue-700",children:e.ticket_id})}),(0,t.jsxs)("td",{className:"px-5 py-3.5",children:[(0,t.jsx)("div",{className:"text-sm font-medium text-gray-900",children:e.client_name}),(0,t.jsx)("div",{className:"text-xs text-gray-500",children:e.client_phone})]}),(0,t.jsx)("td",{className:"px-5 py-3.5",children:(0,t.jsxs)("span",{className:"text-sm text-gray-700 flex items-center gap-1.5",children:[(0,t.jsx)("span",{className:"text-slate-600",children:(0,t.jsx)(u.default,{name:d.CATEGORY_ICONS[e.hardware_category],className:"w-5 h-5"})}),e.brand||d.CATEGORY_LABELS[e.hardware_category],e.model&&(0,t.jsxs)("span",{className:"text-gray-400",children:["Â· ",e.model]})]})}),(0,t.jsx)("td",{className:"px-5 py-3.5",children:(0,t.jsx)(n.default,{status:e.status})}),(0,t.jsx)("td",{className:"px-5 py-3.5",children:(0,t.jsx)(l.default,{priority:e.priority})}),(0,t.jsx)("td",{className:"px-5 py-3.5 text-xs text-gray-500",children:(0,d.formatDate)(e.created_at)}),(0,t.jsx)("td",{className:"px-5 py-3.5 text-right",children:(0,t.jsxs)("div",{className:"flex items-center justify-end gap-1",children:[(0,t.jsx)(s.default,{href:`/tickets/${e.ticket_id}`,className:"p-1.5 text-gray-400 hover:text-blue-600 rounded-md hover:bg-blue-50",title:"Voir",children:(0,t.jsxs)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})}),"Delivered"===e.status&&(0,t.jsx)("button",{onClick:()=>O(e.ticket_id),className:"p-1.5 text-gray-400 hover:text-amber-600 rounded-md hover:bg-amber-50",title:"Archiver",children:(0,t.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 8h14M5 8a2 2 0 110-4h14a2 2 0 110 4M5 8v10a2 2 0 002 2h10a2 2 0 002-2V8m-9 4h4"})})}),(0,t.jsx)("button",{onClick:()=>M(e.ticket_id),className:"p-1.5 text-gray-400 hover:text-red-600 rounded-md hover:bg-red-50",title:"Supprimer",children:(0,t.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})})]},e.ticket_id))})]})}),(0,t.jsx)("div",{className:"lg:hidden space-y-3",children:m.map(e=>(0,t.jsxs)(s.default,{href:`/tickets/${e.ticket_id}`,className:"block bg-white rounded-xl shadow-sm border border-gray-200 p-4 hover:shadow-md transition-shadow",children:[(0,t.jsxs)("div",{className:"flex items-start justify-between mb-2",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"text-sm font-mono font-semibold text-blue-600",children:e.ticket_id}),(0,t.jsx)("p",{className:"text-sm font-medium text-gray-900 mt-0.5",children:e.client_name})]}),(0,t.jsx)(n.default,{status:e.status})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between text-xs text-gray-500",children:[(0,t.jsxs)("span",{className:"flex items-center gap-2",children:[(0,t.jsx)(u.default,{name:d.CATEGORY_ICONS[e.hardware_category],className:"w-5 h-5 text-slate-600"}),(0,t.jsx)("span",{className:"truncate",children:e.brand||d.CATEGORY_LABELS[e.hardware_category]})]}),(0,t.jsx)(l.default,{priority:e.priority})]})]},e.ticket_id))}),y>1&&(0,t.jsxs)("div",{className:"flex items-center justify-center gap-2",children:[(0,t.jsx)("button",{onClick:()=>f(e=>Math.max(1,e-1)),disabled:1===b,className:"px-3 py-1.5 text-sm rounded-lg border border-gray-300 disabled:opacity-40 hover:bg-gray-50",children:"â† PrÃ©cÃ©dent"}),(0,t.jsxs)("span",{className:"text-sm text-gray-600",children:["Page ",b," / ",y]}),(0,t.jsx)("button",{onClick:()=>f(e=>Math.min(y,e+1)),disabled:b===y,className:"px-3 py-1.5 text-sm rounded-lg border border-gray-300 disabled:opacity-40 hover:bg-gray-50",children:"Suivant â†’"})]})]})]})}e.s(["default",()=>m])}]);