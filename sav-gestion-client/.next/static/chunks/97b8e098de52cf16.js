(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,73623,e=>{"use strict";async function t(e,r={}){let s,n=e;n.endsWith(".php")&&(n=n.replace(".php","")),n.startsWith("/api/")||(n="/api/"+n);let i={headers:{"Content-Type":"application/json"},...r},o=await fetch(n,i),a=await o.text();try{s=a?JSON.parse(a):{}}catch(e){s={}}if(!o.ok){let e=Error(s.error||s.errors?.join(", ")||"Erreur API");throw e.status=o.status,e.data=s,e}return s}async function r(e={}){let s=new URLSearchParams(e).toString();return t(`tickets${s?`?${s}`:""}`)}async function s(e){return t(`tickets?id=${encodeURIComponent(e)}`)}async function n(e){return t("tickets",{method:"POST",body:JSON.stringify(e)})}async function i(e,r){return t(`tickets?id=${encodeURIComponent(e)}`,{method:"PUT",body:JSON.stringify(r)})}async function o(e,r){return t(`tickets?id=${encodeURIComponent(e)}`,{method:"PATCH",body:JSON.stringify(r)})}async function a(e){return t(`tickets?id=${encodeURIComponent(e)}`,{method:"DELETE"})}async function c(e={}){let r=new URLSearchParams(e).toString();return t(`archives${r?`?${r}`:""}`)}async function l(e){return t(`archives?id=${encodeURIComponent(e)}`,{method:"POST"})}async function u(){return t("stats")}async function d(e){return t(`status?id=${encodeURIComponent(e)}`)}async function m(e,r=""){let s=new URLSearchParams({q:e});return r&&s.set("category",r),t(`suggestions?${s.toString()}`)}e.s(["archiveTicket",()=>l,"createTicket",()=>n,"deleteTicket",()=>a,"getArchives",()=>c,"getModelSuggestions",()=>m,"getPublicStatus",()=>d,"getStats",()=>u,"getTicket",()=>s,"getTickets",()=>r,"updateTicket",()=>i,"updateTicketStatus",()=>o])},54610,e=>{"use strict";async function t(e,t){let r=await fetch("/api/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:e,password:t})}),s=await r.json();if(!r.ok)throw Error(s.error||"Erreur de connexion");return localStorage.setItem("sav_token",s.token),localStorage.setItem("sav_user",JSON.stringify(s.user)),s}function r(){localStorage.removeItem("sav_token"),localStorage.removeItem("sav_user")}function s(){return!!localStorage.getItem("sav_token")}function n(){try{let e=localStorage.getItem("sav_user");return e?JSON.parse(e):null}catch{return null}}async function i(e){let t=await fetch(`/api/tickets?search=${encodeURIComponent(e)}`),r=await t.json();if(!t.ok)throw Error(r.error||"Erreur");return r.data||r}e.i(73623),e.s(["getUser",()=>n,"isAuthenticated",()=>s,"loginTechnician",()=>t,"logout",()=>r,"lookupTicketsByPhone",()=>i])},49420,e=>{"use strict";var t=e.i(70524),r=e.i(1411),s=e.i(54610);let n=(0,r.createContext)(null);function i({children:e}){let[i,o]=(0,r.useState)(null),[a,c]=(0,r.useState)(!1);return(0,r.useEffect)(()=>{o((0,s.isAuthenticated)()?(0,s.getUser)():null),c(!0)},[]),(0,t.jsx)(n.Provider,{value:{user:i,checked:a,login:function(e){o(e)},logout:function(){(0,s.logout)(),o(null)}},children:e})}function o(){let e=(0,r.useContext)(n);if(!e)throw Error("useAuth must be used within AuthProvider");return e}e.s(["AuthProvider",()=>i,"useAuth",()=>o])},36273,e=>{"use strict";var t=e.i(70524),r=e.i(1411),s=e.i(40561);let n=(0,r.createContext)(null);function i({children:e}){let[i,o]=(0,r.useState)([]),[a,c]=(0,r.useState)(null),l=(0,r.useCallback)(({type:e="info",title:t,message:r,duration:s=4e3})=>{let n=Date.now()+Math.random();o(s=>[...s,{id:n,type:e,title:t,message:r}]),setTimeout(()=>o(e=>e.filter(e=>e.id!==n)),s)},[]),u=(0,r.useCallback)(({title:e="Confirmer",message:t="",confirmText:r="Confirmer",cancelText:s="Annuler",danger:n=!1}={})=>new Promise(i=>{c({title:e,message:t,confirmText:r,cancelText:s,danger:n,resolve:i})}),[]),d=e=>{a?.resolve&&a.resolve(e),c(null)};return(0,t.jsxs)(n.Provider,{value:{showToast:l,confirm:u},children:[e,(0,t.jsx)("div",{className:"fixed top-4 right-4 z-50 flex flex-col gap-3 max-w-sm w-full",children:i.map(e=>(0,t.jsxs)("div",{className:`w-full flex items-start gap-3 p-3 rounded-lg shadow-lg border ${"success"===e.type?"bg-emerald-50 border-emerald-100":"error"===e.type?"bg-red-50 border-red-100":"bg-sky-50 border-sky-100"}`,children:[(0,t.jsx)("div",{className:"mt-0.5 text-xl text-current",children:"success"===e.type?(0,t.jsx)(s.FiCheckCircle,{className:"text-emerald-600"}):"error"===e.type?(0,t.jsx)(s.FiXCircle,{className:"text-red-600"}):(0,t.jsx)(s.FiInfo,{className:"text-sky-600"})}),(0,t.jsxs)("div",{className:"flex-1 text-sm",children:[e.title&&(0,t.jsx)("div",{className:"font-semibold text-gray-800",children:e.title}),(0,t.jsx)("div",{className:"text-gray-700 mt-0.5 whitespace-pre-wrap",children:e.message})]}),(0,t.jsx)("button",{onClick:()=>o(t=>t.filter(t=>t.id!==e.id)),className:"text-gray-400 hover:text-gray-600","aria-label":"Close notification",children:(0,t.jsx)(s.FiX,{})})]},e.id))}),a&&(0,t.jsxs)("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[(0,t.jsx)("div",{className:"absolute inset-0 bg-black/40",onClick:()=>d(!1)}),(0,t.jsxs)("div",{className:"bg-white rounded-lg shadow-xl p-6 z-10 max-w-lg w-full mx-4",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:a.title}),(0,t.jsx)("p",{className:"text-sm text-gray-600 mt-2",children:a.message}),(0,t.jsxs)("div",{className:"mt-6 flex justify-end gap-3",children:[(0,t.jsx)("button",{onClick:()=>d(!1),className:"px-4 py-2 rounded-lg bg-gray-100 text-sm text-gray-700",children:a.cancelText}),(0,t.jsx)("button",{onClick:()=>d(!0),className:`px-4 py-2 rounded-lg text-sm font-medium ${a.danger?"bg-red-600 text-white":"bg-blue-600 text-white"}`,children:a.confirmText})]})]})]})]})}function o(){let e=(0,r.useContext)(n);if(!e)throw Error("useToast must be used within ToastProvider");return e.showToast}function a(){let e=(0,r.useContext)(n);if(!e)throw Error("useConfirm must be used within ToastProvider");return e.confirm}e.s(["ToastProvider",()=>i,"default",0,i,"useConfirm",()=>a,"useToast",()=>o])}]);