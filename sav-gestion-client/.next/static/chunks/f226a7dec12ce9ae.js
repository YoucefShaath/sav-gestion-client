(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,3425,e=>{"use strict";let t=["Received","Diagnostic","In Progress","Completed","Delivered"];function r(e){return e?new Date(e).toLocaleDateString("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}):"â€”"}function s(e){return null==e?"â€”":new Intl.NumberFormat("fr-DZ",{style:"currency",currency:"DZD",minimumFractionDigits:0}).format(e)}function a(e){return t.indexOf(e)}function n(e){let t=e.replace(/[\s\-\.]/g,"");return/^(\+?\d{10,15})$/.test(t)}e.s(["BRANDS",0,["HP","Dell","Lenovo","Acer","Toshiba","Epson","Canon","Sharp","Kyocera","Lexmark","Dahua","Tenda","TP-Link","D-Link","TopLink","Enigma"],"CATEGORIES",0,["Laser Mono - Photocopieur","Laser Mono - MFP","Laser Couleur - Photocopieur","Laser Couleur - MFP","MFP Ink","Matricielle","Laptop","All In One","PC Bureaux","Serveur","Ecran","Reseau","Other"],"CATEGORY_GROUPS",0,[{group:"Imprimante",icon:"ðŸ–¨ï¸",items:["Laser Mono - Photocopieur","Laser Mono - MFP","Laser Couleur - Photocopieur","Laser Couleur - MFP","MFP Ink","Matricielle"]},{group:"Informatique",icon:"ðŸ’»",items:["Laptop","All In One","PC Bureaux","Serveur","Ecran","Reseau"]}],"CATEGORY_ICONS",0,{"Laser Mono - Photocopieur":"printer","Laser Mono - MFP":"printer","Laser Couleur - Photocopieur":"printer","Laser Couleur - MFP":"printer","MFP Ink":"printer",Matricielle:"printer",Laptop:"laptop","All In One":"laptop","PC Bureaux":"laptop",Serveur:"server",Ecran:"laptop",Reseau:"server",Other:"wrench"},"CATEGORY_LABELS",0,{"Laser Mono - Photocopieur":"Laser Mono â€“ Photocopieur","Laser Mono - MFP":"Laser Mono â€“ Imprimante MFP","Laser Couleur - Photocopieur":"Laser Couleur â€“ Photocopieur","Laser Couleur - MFP":"Laser Couleur â€“ Imprimante MFP","MFP Ink":"MFP Ink Cartouche / Bouteille",Matricielle:"Matricielle",Laptop:"Laptop","All In One":"All In One","PC Bureaux":"PC Bureaux",Serveur:"Serveur",Ecran:"Ã‰cran",Reseau:"RÃ©seau",Other:"Autre"},"COMPUTER_CATEGORIES",0,["Laptop","All In One","PC Bureaux","Serveur"],"COMPUTER_PROBLEMS",0,["Disques durs (HDD / SSD)","Barrettes mÃ©moire (RAM)","Cartes mÃ¨res","Alimentations","Cartes graphiques","Processeurs","Ventilateurs / SystÃ¨mes de refroidissement"],"PRIORITIES",0,["Low","Normal","High","Urgent"],"PRIORITY_COLORS",0,{Low:{bg:"bg-slate-100",text:"text-slate-600"},Normal:{bg:"bg-blue-50",text:"text-blue-600"},High:{bg:"bg-orange-100",text:"text-orange-700"},Urgent:{bg:"bg-red-100",text:"text-red-700"}},"PRIORITY_LABELS",0,{Low:"Basse",Normal:"Normale",High:"Haute",Urgent:"Urgente"},"STATUSES",0,t,"STATUS_COLORS",0,{Received:{bg:"bg-red-100",text:"text-red-700",dot:"bg-red-500"},Diagnostic:{bg:"bg-amber-100",text:"text-amber-700",dot:"bg-amber-500"},"In Progress":{bg:"bg-blue-100",text:"text-blue-700",dot:"bg-blue-500"},Completed:{bg:"bg-green-100",text:"text-green-700",dot:"bg-green-500"},Delivered:{bg:"bg-gray-100",text:"text-gray-600",dot:"bg-gray-400"}},"STATUS_LABELS",0,{Received:"ReÃ§u",Diagnostic:"Diagnostic","In Progress":"En cours",Completed:"TerminÃ©",Delivered:"LivrÃ©"},"TRANSITIONS",0,{Received:["Diagnostic"],Diagnostic:["In Progress","Received","Completed"],"In Progress":["Completed","Diagnostic"],Completed:["Delivered","In Progress"],Delivered:[]},"formatCurrency",()=>s,"formatDate",()=>r,"getStatusStep",()=>a,"validatePhone",()=>n])},93714,8002,e=>{"use strict";var t=e.i(70524),r=e.i(3425);function s({status:e,size:s="sm"}){let a=r.STATUS_COLORS[e]||{bg:"bg-gray-100",text:"text-gray-600",dot:"bg-gray-400"},n=r.STATUS_LABELS[e]||e;return(0,t.jsxs)("span",{className:`inline-flex items-center gap-1.5 rounded-full font-semibold ${a.bg} ${a.text} ${"lg"===s?"px-3 py-1.5 text-sm":"px-2.5 py-0.5 text-xs"} transition-colors duration-300`,children:[(0,t.jsx)("span",{className:`w-1.5 h-1.5 rounded-full ${a.dot} transform transition-transform duration-300`}),n]})}function a({message:e="Chargement..."}){return(0,t.jsxs)("div",{className:"flex flex-col items-center justify-center py-16 gap-3",children:[(0,t.jsx)("div",{className:"w-8 h-8 border-3 border-blue-200 border-t-blue-600 rounded-full animate-spin"}),(0,t.jsx)("p",{className:"text-sm text-gray-500",children:e})]})}e.s(["default",()=>s],93714),e.s(["default",()=>a],8002)},83140,e=>{"use strict";var t=e.i(70524),r=e.i(3425);function s({priority:e}){let s=r.PRIORITY_COLORS[e]||{bg:"bg-gray-100",text:"text-gray-600"},a=r.PRIORITY_LABELS[e]||e;return(0,t.jsx)("span",{className:`inline-flex items-center px-2 py-0.5 rounded text-xs font-medium ${s.bg} ${s.text}`,children:a})}e.s(["default",()=>s])},37997,e=>{"use strict";var t=e.i(70524),r=e.i(1411),s=e.i(73623),a=e.i(93714),n=e.i(83140),i=e.i(8002),l=e.i(37321),o=e.i(3425),c=e.i(36273);function d(){let[e,d]=(0,r.useState)([]),[u,x]=(0,r.useState)(!0),[m,p]=(0,r.useState)(""),[g,h]=(0,r.useState)(null),[b,f]=(0,r.useState)(null),S=(0,c.useToast)(),y=(0,r.useCallback)(async()=>{x(!0);try{let e={};m&&(e.status=m);let t=await (0,s.getTickets)(e);d(t.data||[])}catch{d([])}finally{x(!1)}},[m]);async function j(e,t,r={}){h(e);try{await (0,s.updateTicketStatus)(e,{status:t,...r}),y()}catch(e){S({type:"error",message:e.data?.error||e.message})}finally{h(null)}}(0,r.useEffect)(()=>{y()},[y]);let L=o.STATUSES.filter(e=>"Delivered"!==e);return(0,t.jsxs)("div",{className:"space-y-5",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Vue technicien"}),(0,t.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:"Interface rapide pour mettre Ã  jour les tickets"})]}),(0,t.jsxs)("div",{className:"flex gap-2 overflow-x-auto pb-1 no-scrollbar",children:[(0,t.jsx)("button",{onClick:()=>p(""),className:`px-4 py-2 rounded-full text-sm font-medium whitespace-nowrap transition-colors
            ${!m?"bg-blue-600 text-white":"bg-white text-gray-600 border border-gray-200 hover:bg-gray-50"}`,children:"Tous"}),L.map(e=>{let r=o.STATUS_COLORS[e];return(0,t.jsx)("button",{onClick:()=>p(e),className:`px-4 py-2 rounded-full text-sm font-medium whitespace-nowrap transition-colors
                ${m===e?`${r.bg} ${r.text}`:"bg-white text-gray-600 border border-gray-200 hover:bg-gray-50"}`,children:o.STATUS_LABELS[e]},e)})]}),u?(0,t.jsx)(i.default,{}):0===e.length?(0,t.jsxs)("div",{className:"text-center py-12 text-gray-400",children:[(0,t.jsx)("p",{className:"text-4xl mb-3",children:"ðŸ”§"}),(0,t.jsx)("p",{className:"text-sm",children:"Aucun ticket Ã  afficher"})]}):(0,t.jsx)("div",{className:"space-y-3",children:e.map(e=>{let r=b===e.ticket_id,s=o.TRANSITIONS[e.status]||[],i=g===e.ticket_id;return(0,t.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",children:[(0,t.jsx)("button",{onClick:()=>f(r?null:e.ticket_id),className:"w-full p-4 text-left focus:outline-none",children:(0,t.jsxs)("div",{className:"flex items-start justify-between",children:[(0,t.jsxs)("div",{className:"flex items-start gap-3 min-w-0",children:[(0,t.jsx)("span",{className:"text-2xl mt-0.5",children:(0,t.jsx)(l.default,{name:o.CATEGORY_ICONS[e.hardware_category],className:"w-6 h-6 text-slate-600"})}),(0,t.jsxs)("div",{className:"min-w-0",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 flex-wrap",children:[(0,t.jsx)("span",{className:"text-sm font-mono font-bold text-gray-900",children:e.ticket_id}),(0,t.jsx)(n.default,{priority:e.priority})]}),(0,t.jsx)("p",{className:"text-sm font-medium text-gray-700 mt-0.5 truncate",children:e.client_name}),(0,t.jsxs)("p",{className:"text-xs text-gray-400 mt-0.5",children:[e.brand," ",e.model," Â· ",e.location||"â€”"]})]})]}),(0,t.jsxs)("div",{className:"flex flex-col items-end gap-1.5 flex-shrink-0 ml-3",children:[(0,t.jsx)(a.default,{status:e.status}),(0,t.jsx)("svg",{className:`w-4 h-4 text-gray-400 transition-transform ${r?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]})]})}),r&&(0,t.jsxs)("div",{className:"px-4 pb-4 border-t border-gray-100 pt-3 space-y-3",children:[(0,t.jsxs)("div",{className:"bg-gray-50 rounded-lg p-3",children:[(0,t.jsx)("p",{className:"text-xs font-semibold text-gray-500 uppercase mb-1",children:"ProblÃ¨me"}),(0,t.jsx)("p",{className:"text-sm text-gray-700",children:e.problem_description})]}),e.diagnostic_notes&&(0,t.jsxs)("div",{className:"bg-amber-50 rounded-lg p-3",children:[(0,t.jsx)("p",{className:"text-xs font-semibold text-amber-600 uppercase mb-1",children:"Diagnostic"}),(0,t.jsx)("p",{className:"text-sm text-gray-700",children:e.diagnostic_notes})]}),e.technician_notes&&(0,t.jsxs)("div",{className:"bg-blue-50 rounded-lg p-3",children:[(0,t.jsx)("p",{className:"text-xs font-semibold text-blue-600 uppercase mb-1",children:"Notes technicien"}),(0,t.jsx)("p",{className:"text-sm text-gray-700",children:e.technician_notes})]}),(0,t.jsxs)("div",{className:"flex flex-wrap gap-3 text-xs text-gray-500",children:[(0,t.jsxs)("span",{children:["ðŸ“ž ",e.client_phone]}),(0,t.jsxs)("span",{children:["ðŸ“… ",(0,o.formatDate)(e.created_at)]}),e.estimated_cost&&(0,t.jsxs)("span",{children:["ðŸ’° ",e.estimated_cost," DA"]})]}),s.length>0&&(0,t.jsxs)("div",{className:"pt-2 space-y-2",children:[(0,t.jsx)("p",{className:"text-xs font-semibold text-gray-500 uppercase",children:"Changer le statut :"}),(0,t.jsx)("div",{className:"flex flex-col sm:flex-row gap-2",children:s.map(r=>{let s=o.STATUS_COLORS[r];return(0,t.jsx)("button",{onClick:()=>j(e.ticket_id,r),disabled:i,className:`flex-1 py-3 px-4 rounded-xl text-sm font-bold transition-all
                                  ${s.bg} ${s.text} hover:shadow-md
                                  active:scale-[0.98] disabled:opacity-50 disabled:cursor-not-allowed
                                  border-2 border-transparent hover:border-current`,children:i?(0,t.jsxs)("span",{className:"flex items-center justify-center gap-2",children:[(0,t.jsx)("span",{className:"w-4 h-4 border-2 border-current/30 border-t-current rounded-full animate-spin"}),"Mise Ã  jour..."]}):`â†’ ${o.STATUS_LABELS[r]}`},r)})})]})]})]},e.ticket_id)})})]})}e.s(["default",()=>d])}]);