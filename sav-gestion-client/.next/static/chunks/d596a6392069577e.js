(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,3425,e=>{"use strict";let t=["Received","Diagnostic","In Progress","Completed","Delivered"];function r(e){return e?new Date(e).toLocaleDateString("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}):"â€”"}function s(e){return null==e?"â€”":new Intl.NumberFormat("fr-DZ",{style:"currency",currency:"DZD",minimumFractionDigits:0}).format(e)}function a(e){return t.indexOf(e)}function l(e){let t=e.replace(/[\s\-\.]/g,"");return/^(\+?\d{10,15})$/.test(t)}e.s(["BRANDS",0,["HP","Dell","Lenovo","Acer","Toshiba","Epson","Canon","Sharp","Kyocera","Lexmark","Dahua","Tenda","TP-Link","D-Link","TopLink","Enigma"],"CATEGORIES",0,["Laser Mono - Photocopieur","Laser Mono - MFP","Laser Couleur - Photocopieur","Laser Couleur - MFP","MFP Ink","Matricielle","Laptop","All In One","PC Bureaux","Serveur","Ecran","Reseau","Other"],"CATEGORY_GROUPS",0,[{group:"Imprimante",icon:"ðŸ–¨ï¸",items:["Laser Mono - Photocopieur","Laser Mono - MFP","Laser Couleur - Photocopieur","Laser Couleur - MFP","MFP Ink","Matricielle"]},{group:"Informatique",icon:"ðŸ’»",items:["Laptop","All In One","PC Bureaux","Serveur","Ecran","Reseau"]}],"CATEGORY_ICONS",0,{"Laser Mono - Photocopieur":"printer","Laser Mono - MFP":"printer","Laser Couleur - Photocopieur":"printer","Laser Couleur - MFP":"printer","MFP Ink":"printer",Matricielle:"printer",Laptop:"laptop","All In One":"laptop","PC Bureaux":"laptop",Serveur:"server",Ecran:"laptop",Reseau:"server",Other:"wrench"},"CATEGORY_LABELS",0,{"Laser Mono - Photocopieur":"Laser Mono â€“ Photocopieur","Laser Mono - MFP":"Laser Mono â€“ Imprimante MFP","Laser Couleur - Photocopieur":"Laser Couleur â€“ Photocopieur","Laser Couleur - MFP":"Laser Couleur â€“ Imprimante MFP","MFP Ink":"MFP Ink Cartouche / Bouteille",Matricielle:"Matricielle",Laptop:"Laptop","All In One":"All In One","PC Bureaux":"PC Bureaux",Serveur:"Serveur",Ecran:"Ã‰cran",Reseau:"RÃ©seau",Other:"Autre"},"COMPUTER_CATEGORIES",0,["Laptop","All In One","PC Bureaux","Serveur"],"COMPUTER_PROBLEMS",0,["Disques durs (HDD / SSD)","Barrettes mÃ©moire (RAM)","Cartes mÃ¨res","Alimentations","Cartes graphiques","Processeurs","Ventilateurs / SystÃ¨mes de refroidissement"],"PRIORITIES",0,["Low","Normal","High","Urgent"],"PRIORITY_COLORS",0,{Low:{bg:"bg-slate-100",text:"text-slate-600"},Normal:{bg:"bg-blue-50",text:"text-blue-600"},High:{bg:"bg-orange-100",text:"text-orange-700"},Urgent:{bg:"bg-red-100",text:"text-red-700"}},"PRIORITY_LABELS",0,{Low:"Basse",Normal:"Normale",High:"Haute",Urgent:"Urgente"},"STATUSES",0,t,"STATUS_COLORS",0,{Received:{bg:"bg-red-100",text:"text-red-700",dot:"bg-red-500"},Diagnostic:{bg:"bg-amber-100",text:"text-amber-700",dot:"bg-amber-500"},"In Progress":{bg:"bg-blue-100",text:"text-blue-700",dot:"bg-blue-500"},Completed:{bg:"bg-green-100",text:"text-green-700",dot:"bg-green-500"},Delivered:{bg:"bg-gray-100",text:"text-gray-600",dot:"bg-gray-400"}},"STATUS_LABELS",0,{Received:"ReÃ§u",Diagnostic:"Diagnostic","In Progress":"En cours",Completed:"TerminÃ©",Delivered:"LivrÃ©"},"TRANSITIONS",0,{Received:["Diagnostic"],Diagnostic:["In Progress","Received","Completed"],"In Progress":["Completed","Diagnostic"],Completed:["Delivered","In Progress"],Delivered:[]},"formatCurrency",()=>s,"formatDate",()=>r,"getStatusStep",()=>a,"validatePhone",()=>l])},93714,8002,e=>{"use strict";var t=e.i(70524),r=e.i(3425);function s({status:e,size:s="sm"}){let a=r.STATUS_COLORS[e]||{bg:"bg-gray-100",text:"text-gray-600",dot:"bg-gray-400"},l=r.STATUS_LABELS[e]||e;return(0,t.jsxs)("span",{className:`inline-flex items-center gap-1.5 rounded-full font-semibold ${a.bg} ${a.text} ${"lg"===s?"px-3 py-1.5 text-sm":"px-2.5 py-0.5 text-xs"} transition-colors duration-300`,children:[(0,t.jsx)("span",{className:`w-1.5 h-1.5 rounded-full ${a.dot} transform transition-transform duration-300`}),l]})}function a({message:e="Chargement..."}){return(0,t.jsxs)("div",{className:"flex flex-col items-center justify-center py-16 gap-3",children:[(0,t.jsx)("div",{className:"w-8 h-8 border-3 border-blue-200 border-t-blue-600 rounded-full animate-spin"}),(0,t.jsx)("p",{className:"text-sm text-gray-500",children:e})]})}e.s(["default",()=>s],93714),e.s(["default",()=>a],8002)},83140,e=>{"use strict";var t=e.i(70524),r=e.i(3425);function s({priority:e}){let s=r.PRIORITY_COLORS[e]||{bg:"bg-gray-100",text:"text-gray-600"},a=r.PRIORITY_LABELS[e]||e;return(0,t.jsx)("span",{className:`inline-flex items-center px-2 py-0.5 rounded text-xs font-medium ${s.bg} ${s.text}`,children:a})}e.s(["default",()=>s])},64604,e=>{"use strict";var t=e.i(70524),r=e.i(1411),s=e.i(97529),a=e.i(69823),l=e.i(73623),i=e.i(49420),n=e.i(93714),o=e.i(83140),c=e.i(8002),d=e.i(3425),u=e.i(37321);function x(){let{user:e}=(0,i.useAuth)(),x=(0,a.useRouter)(),[m,b]=(0,r.useState)(null),[h,p]=(0,r.useState)(!0),[y,f]=(0,r.useState)(null);async function v(){try{p(!0);let e=await (0,l.getStats)();b(e)}catch(e){f(e.message)}finally{p(!1)}}return((0,r.useEffect)(()=>{e&&"admin"!==e.role?x.replace("/tickets"):v()},[e]),h)?(0,t.jsx)(c.default,{message:"Chargement du tableau de bord..."}):y?(0,t.jsxs)("div",{className:"text-center py-16",children:[(0,t.jsxs)("p",{className:"text-red-500 mb-4",children:["Erreur: ",y]}),(0,t.jsx)("button",{onClick:v,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"RÃ©essayer"})]}):(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Tableau de bord"}),(0,t.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:"Vue d'ensemble de l'activitÃ© SAV"})]}),(0,t.jsxs)(s.default,{href:"/new-ticket",className:"inline-flex items-center gap-2 px-4 py-2.5 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors font-medium text-sm shadow-sm",children:[(0,t.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Nouveau ticket"]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4",children:[(0,t.jsx)(g,{title:"Total actifs",value:m.total_active,icon:"ðŸ“Š",color:"bg-blue-600"}),(0,t.jsx)(g,{title:"Aujourd'hui",value:m.today,icon:"ðŸ“…",color:"bg-emerald-600"}),(0,t.jsx)(g,{title:"Urgents",value:m.by_priority?.Urgent||0,icon:"ðŸš¨",color:"bg-red-600"}),(0,t.jsx)(g,{title:"ArchivÃ©s",value:m.total_archived,icon:"ðŸ—„ï¸",color:"bg-gray-600"})]}),(0,t.jsx)("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-5 gap-3",children:[{key:"Received",label:"ReÃ§us",color:"border-red-500",bg:"bg-red-50",icon:"ðŸ“¥"},{key:"Diagnostic",label:"Diagnostic",color:"border-amber-500",bg:"bg-amber-50",icon:"ðŸ”"},{key:"In Progress",label:"En cours",color:"border-blue-500",bg:"bg-blue-50",icon:"ðŸ”§"},{key:"Completed",label:"TerminÃ©s",color:"border-green-500",bg:"bg-green-50",icon:"âœ…"},{key:"Delivered",label:"LivrÃ©s",color:"border-gray-400",bg:"bg-gray-50",icon:"ðŸ“¦"}].map(e=>(0,t.jsxs)(s.default,{href:`/tickets?status=${encodeURIComponent(e.key)}`,className:`${e.bg} rounded-xl p-4 border-l-4 ${e.color} hover:shadow-md transition-shadow`,children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,t.jsx)("span",{className:"text-xl",children:e.icon}),(0,t.jsx)("span",{className:"text-xs font-medium text-gray-600 uppercase tracking-wide",children:e.label})]}),(0,t.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:m.by_status?.[e.key]||0})]},e.key))}),(0,t.jsxs)("div",{className:"grid lg:grid-cols-3 gap-6",children:[(0,t.jsxs)("div",{className:"lg:col-span-2 bg-white rounded-xl shadow-sm border border-gray-200",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between px-5 py-4 border-b border-gray-100",children:[(0,t.jsx)("h2",{className:"font-semibold text-gray-900",children:"Tickets rÃ©cents"}),(0,t.jsx)(s.default,{href:"/tickets",className:"text-sm text-blue-600 hover:text-blue-700 font-medium",children:"Voir tout â†’"})]}),(0,t.jsx)("div",{className:"divide-y divide-gray-50",children:m.recent?.length>0?m.recent.map(e=>(0,t.jsxs)(s.default,{href:`/tickets/${e.ticket_id}`,className:"flex items-center gap-4 px-5 py-3.5 hover:bg-gray-50 transition-colors",children:[(0,t.jsx)("span",{className:"text-xl",children:(0,t.jsx)(u.default,{name:d.CATEGORY_ICONS[e.hardware_category],className:"w-6 h-6 text-slate-600"})}),(0,t.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("span",{className:"text-sm font-semibold text-gray-900",children:e.ticket_id}),(0,t.jsx)(n.default,{status:e.status})]}),(0,t.jsx)("p",{className:"text-sm text-gray-500 truncate",children:e.client_name})]}),(0,t.jsxs)("div",{className:"hidden sm:flex flex-col items-end gap-1",children:[(0,t.jsx)(o.default,{priority:e.priority}),(0,t.jsx)("span",{className:"text-xs text-gray-400",children:(0,d.formatDate)(e.created_at)})]})]},e.ticket_id)):(0,t.jsx)("p",{className:"px-5 py-8 text-center text-gray-400 text-sm",children:"Aucun ticket pour le moment"})})]}),(0,t.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200",children:[(0,t.jsx)("div",{className:"px-5 py-4 border-b border-gray-100",children:(0,t.jsx)("h2",{className:"font-semibold text-gray-900",children:"Par catÃ©gorie"})}),(0,t.jsx)("div",{className:"p-5 space-y-3",children:m.by_category?.length>0?m.by_category.map(e=>{let r=m.total_active>0?Math.round(e.count/m.total_active*100):0;return(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-1",children:[(0,t.jsxs)("span",{className:"text-sm text-gray-700 flex items-center gap-2",children:[(0,t.jsx)("span",{children:(0,t.jsx)(u.default,{name:d.CATEGORY_ICONS[e.hardware_category],className:"w-5 h-5 text-slate-600"})}),d.CATEGORY_LABELS[e.hardware_category]||e.hardware_category]}),(0,t.jsx)("span",{className:"text-sm font-semibold text-gray-900",children:e.count})]}),(0,t.jsx)("div",{className:"w-full bg-gray-100 rounded-full h-2",children:(0,t.jsx)("div",{className:"bg-blue-500 h-2 rounded-full transition-all",style:{width:`${r}%`}})})]},e.hardware_category)}):(0,t.jsx)("p",{className:"text-center text-gray-400 text-sm py-4",children:"Pas de donnÃ©es"})})]})]})]})}function g({title:e,value:r,icon:s,color:a}){return(0,t.jsx)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-5",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-xs font-medium text-gray-500 uppercase tracking-wider",children:e}),(0,t.jsx)("p",{className:"text-3xl font-bold text-gray-900 mt-1",children:r})]}),(0,t.jsx)("div",{className:`w-10 h-10 ${a} rounded-lg flex items-center justify-center text-white text-lg`,children:s})]})})}e.s(["default",()=>x])}]);