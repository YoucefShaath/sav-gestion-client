{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 22, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Youcef/sav-gestion-client/src/components/Sidebar.js"],"sourcesContent":["\"use client\";\r\n\r\nimport Link from \"next/link\";\r\nimport { usePathname, useRouter } from \"next/navigation\";\r\nimport { useState, useEffect } from \"react\";\r\nimport { useAuth } from \"./AuthProvider\";\r\nimport {\r\n  FiHome,\r\n  FiList,\r\n  FiPlusCircle,\r\n  FiTool,\r\n  FiArchive,\r\n  FiChevronLeft,\r\n  FiChevronRight,\r\n  FiLogOut,\r\n  FiUser,\r\n} from \"react-icons/fi\";\r\n\r\nconst NAV_ITEMS = [\r\n  {\r\n    href: \"/dashboard\",\r\n    label: \"Tableau de bord\",\r\n    icon: FiHome,\r\n    adminOnly: true,\r\n  },\r\n  { href: \"/tickets\", label: \"Tickets\", icon: FiList },\r\n  { href: \"/new-ticket\", label: \"Nouveau ticket\", icon: FiPlusCircle },\r\n  { href: \"/technician\", label: \"Vue technicien\", icon: FiTool },\r\n  { href: \"/archives\", label: \"Archives\", icon: FiArchive },\r\n];\r\n\r\nexport default function Sidebar() {\r\n  const pathname = usePathname();\r\n  const router = useRouter();\r\n  const { user, logout } = useAuth();\r\n\r\n  const [mobileOpen, setMobileOpen] = useState(false);\r\n  const [collapsed, setCollapsed] = useState(false);\r\n\r\n  useEffect(() => {\r\n    try {\r\n      const stored = localStorage.getItem(\"sidebar-collapsed\");\r\n      if (stored) setCollapsed(stored === \"true\");\r\n    } catch (e) {}\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    try {\r\n      localStorage.setItem(\"sidebar-collapsed\", String(collapsed));\r\n    } catch (e) {}\r\n  }, [collapsed]);\r\n\r\n  function handleLogout() {\r\n    logout();\r\n    router.push(\"/\");\r\n  }\r\n\r\n  return (\r\n    <>\r\n      {/* Mobile hamburger */}\r\n      <button\r\n        onClick={() => setMobileOpen(true)}\r\n        className=\"lg:hidden fixed top-4 left-4 z-50 p-2 bg-white rounded-lg shadow-md border border-gray-200\"\r\n        aria-label=\"Ouvrir le menu\"\r\n      >\r\n        <svg\r\n          className=\"w-6 h-6 text-gray-700\"\r\n          fill=\"none\"\r\n          stroke=\"currentColor\"\r\n          viewBox=\"0 0 24 24\"\r\n        >\r\n          <path\r\n            strokeLinecap=\"round\"\r\n            strokeLinejoin=\"round\"\r\n            strokeWidth={2}\r\n            d=\"M4 6h16M4 12h16M4 18h16\"\r\n          />\r\n        </svg>\r\n      </button>\r\n\r\n      {/* Overlay */}\r\n      {mobileOpen && (\r\n        <div\r\n          className=\"lg:hidden fixed inset-0 z-40 bg-black/40\"\r\n          onClick={() => setMobileOpen(false)}\r\n        />\r\n      )}\r\n\r\n      {/* Sidebar (desktop + mobile) */}\r\n      <aside\r\n        className={`fixed top-0 left-0 z-50 h-full bg-gradient-to-b from-slate-900/95 to-slate-900 text-white flex flex-col transition-all duration-300 ease-in-out\r\n          ${mobileOpen ? \"w-64 translate-x-0\" : \"-translate-x-full lg:translate-x-0\"} lg:sticky lg:top-0 lg:h-screen lg:z-auto lg:flex-shrink-0 ${collapsed ? \"lg:w-20\" : \"lg:w-64\"}`}\r\n      >\r\n        {/* Logo / Brand */}\r\n        <div\r\n          className={`flex items-center gap-3 px-4 py-4 ${collapsed ? \"justify-center\" : \"justify-start\"}`}\r\n        >\r\n          <div className=\"flex items-center gap-3\">\r\n            <div className=\"w-10 h-10 rounded-lg bg-gradient-to-br from-blue-600 to-indigo-500 flex items-center justify-center shadow-md overflow-hidden\">\r\n              <img\r\n                src=\"/logo.jpg\"\r\n                alt=\"logo\"\r\n                className=\"w-full h-full object-cover\"\r\n              />\r\n            </div>\r\n            {!collapsed && (\r\n              <div>\r\n                <h1 className=\"text-lg font-bold leading-tight\">Informatica</h1>\r\n                <p className=\"text-xs text-slate-300\">\r\n                  Solutions informatiques\r\n                </p>\r\n              </div>\r\n            )}\r\n          </div>\r\n        </div>\r\n\r\n        {/* Nav */}\r\n        <nav className=\"flex-1 px-2 py-4 space-y-1 overflow-y-auto\">\r\n          {NAV_ITEMS.filter(\r\n            (item) => !item.adminOnly || user?.role === \"admin\",\r\n          ).map((item) => {\r\n            const Icon = item.icon;\r\n            const isActive =\r\n              pathname === item.href ||\r\n              (item.href !== \"/dashboard\" && pathname.startsWith(item.href));\r\n            return (\r\n              <Link\r\n                key={item.href}\r\n                href={item.href}\r\n                onClick={() => setMobileOpen(false)}\r\n                className={`group relative flex items-center gap-3 px-3 py-2 rounded-lg transition-all duration-200 text-sm font-medium overflow-hidden\r\n                  ${isActive ? \"bg-gradient-to-r from-blue-600/90 to-indigo-600/80 shadow-md\" : \"text-slate-300 hover:bg-white/5 hover:text-white\"}`}\r\n                title={item.label}\r\n              >\r\n                {/* Active indicator */}\r\n                <span\r\n                  className={`absolute left-0 top-0 bottom-0 w-1 rounded-tr-md rounded-br-md transition-all ${isActive ? \"bg-blue-400\" : \"opacity-0\"}`}\r\n                />\r\n\r\n                {/* Icon */}\r\n                <span\r\n                  className={`flex items-center justify-center shrink-0 ${collapsed ? \"w-full\" : \"w-8 h-8\"} text-lg rounded-md transition-colors ${isActive ? \"text-white\" : \"text-slate-300 group-hover:text-white\"}`}\r\n                >\r\n                  <Icon className={`${collapsed ? \"mx-auto\" : \"\"} w-5 h-5`} />\r\n                </span>\r\n\r\n                {/* Label (hidden when collapsed) */}\r\n                <span className={`${collapsed ? \"hidden\" : \"truncate\"}`}>\r\n                  {item.label}\r\n                </span>\r\n\r\n                {/* subtle arrow for active */}\r\n                {!collapsed && isActive && (\r\n                  <svg\r\n                    className=\"ml-auto w-4 h-4 text-white/60\"\r\n                    viewBox=\"0 0 24 24\"\r\n                    fill=\"none\"\r\n                    stroke=\"currentColor\"\r\n                  >\r\n                    <path\r\n                      strokeLinecap=\"round\"\r\n                      strokeLinejoin=\"round\"\r\n                      strokeWidth={2}\r\n                      d=\"M9 5l7 7-7 7\"\r\n                    />\r\n                  </svg>\r\n                )}\r\n              </Link>\r\n            );\r\n          })}\r\n        </nav>\r\n\r\n        {/* Footer: user + collapse */}\r\n        <div\r\n          className={`px-3 py-3 border-t border-white/6 flex items-center gap-3 ${collapsed ? \"justify-center\" : \"justify-between\"}`}\r\n        >\r\n          {user ? (\r\n            <div\r\n              className={`flex items-center gap-3 ${collapsed ? \"flex-col\" : \"flex-row\"}`}\r\n            >\r\n              <div className=\"w-9 h-9 rounded-full bg-gradient-to-br from-indigo-500 to-sky-500 flex items-center justify-center text-white font-semibold uppercase shadow-inner\">\r\n                {user.name\r\n                  ? user.name\r\n                      .split(\" \")\r\n                      .map((n) => n[0])\r\n                      .slice(0, 2)\r\n                      .join(\"\")\r\n                  : (user.username || \"U\").slice(0, 2).toUpperCase()}\r\n              </div>\r\n              {!collapsed && (\r\n                <div className=\"flex-1 min-w-0\">\r\n                  <div className=\"text-sm font-semibold truncate\">\r\n                    {user.name || user.username}\r\n                  </div>\r\n                  <div className=\"text-xs text-slate-400\">{user.role}</div>\r\n                </div>\r\n              )}\r\n            </div>\r\n          ) : (\r\n            !collapsed && (\r\n              <div className=\"text-xs text-slate-400\">Bienvenue</div>\r\n            )\r\n          )}\r\n\r\n          <div className=\"flex items-center gap-2\">\r\n            {!collapsed && (\r\n              <button\r\n                onClick={handleLogout}\r\n                className=\"p-2 rounded-md text-slate-300 hover:text-red-400\"\r\n                title=\"Se déconnecter\"\r\n              >\r\n                <FiLogOut className=\"w-4 h-4\" />\r\n              </button>\r\n            )}\r\n\r\n            <button\r\n              onClick={() => setCollapsed((v) => !v)}\r\n              className=\"p-2 rounded-md bg-white/3 text-slate-200 hover:bg-white/6 transition-colors hidden md:block\"\r\n              title={collapsed ? \"Développer la barre\" : \"Réduire la barre\"}\r\n            >\r\n              {collapsed ? (\r\n                <FiChevronRight className=\"w-4 h-4\" />\r\n              ) : (\r\n                <FiChevronLeft className=\"w-4 h-4\" />\r\n              )}\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </aside>\r\n    </>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 380, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Youcef/sav-gestion-client/src/app/%28admin%29/layout.js"],"sourcesContent":["\"use client\";\r\n\r\nimport { useEffect } from \"react\";\r\nimport { useRouter } from \"next/navigation\";\r\nimport { useAuth } from \"@/components/AuthProvider\";\r\nimport Sidebar from \"@/components/Sidebar\";\r\n\r\nexport default function AdminLayout({ children }) {\r\n  const { user, checked } = useAuth();\r\n  const router = useRouter();\r\n\r\n  useEffect(() => {\r\n    if (checked && !user) {\r\n      router.replace(\"/login\");\r\n    }\r\n  }, [checked, user, router]);\r\n\r\n  // While checking auth state, show nothing (avoid flash)\r\n  if (!checked) {\r\n    return (\r\n      <div className=\"min-h-screen flex items-center justify-center bg-gray-50\">\r\n        <div className=\"w-8 h-8 border-3 border-blue-600 border-t-transparent rounded-full animate-spin\" />\r\n      </div>\r\n    );\r\n  }\r\n\r\n  // Not authenticated\r\n  if (!user) return null;\r\n\r\n  return (\r\n    <div className=\"flex min-h-screen bg-gray-50\">\r\n      <Sidebar />\r\n      <main className=\"flex-1 p-4 pt-16 sm:p-6 sm:pt-16 lg:p-8 lg:pt-8 overflow-auto\">\r\n        {children}\r\n      </main>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AACA;AALA;;;;;;AAOe,SAAS,YAAY,EAAE,QAAQ,EAAE;IAC9C,MAAM,EAAE,IAAI,EAAE,OAAO,EAAE,GAAG,IAAA,wKAAO;IACjC,MAAM,SAAS,IAAA,2KAAS;IAExB,IAAA,8OAAS,EAAC;QACR,IAAI,WAAW,CAAC,MAAM;YACpB,OAAO,OAAO,CAAC;QACjB;IACF,GAAG;QAAC;QAAS;QAAM;KAAO;IAE1B,wDAAwD;IACxD,IAAI,CAAC,SAAS;QACZ,qBACE,0QAAC;YAAI,WAAU;sBACb,cAAA,0QAAC;gBAAI,WAAU;;;;;;;;;;;IAGrB;IAEA,oBAAoB;IACpB,IAAI,CAAC,MAAM,OAAO;IAElB,qBACE,0QAAC;QAAI,WAAU;;0BACb,0QAAC,mKAAO;;;;;0BACR,0QAAC;gBAAK,WAAU;0BACb;;;;;;;;;;;;AAIT"}}]
}