{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 118, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Youcef/sav-gestion-client/src/lib/db.js"],"sourcesContent":["import mysql from \"mysql2/promise\";\r\n\r\nconst pool = mysql.createPool({\r\n  host: process.env.DB_HOST || \"localhost\",\r\n  user: process.env.DB_USER || \"root\",\r\n  password: process.env.DB_PASS || \"\",\r\n  database: process.env.DB_NAME || \"sav_gestion\",\r\n  port: parseInt(process.env.DB_PORT || \"3306\"),\r\n  charset: \"utf8mb4\",\r\n  waitForConnections: true,\r\n  connectionLimit: 10,\r\n  queueLimit: 0,\r\n});\r\n\r\nexport default pool;\r\n"],"names":[],"mappings":";;;;AAAA;;AAEA,MAAM,OAAO,0KAAK,CAAC,UAAU,CAAC;IAC5B,MAAM,QAAQ,GAAG,CAAC,OAAO,IAAI;IAC7B,MAAM,QAAQ,GAAG,CAAC,OAAO,IAAI;IAC7B,UAAU,QAAQ,GAAG,CAAC,OAAO,IAAI;IACjC,UAAU,QAAQ,GAAG,CAAC,OAAO,IAAI;IACjC,MAAM,SAAS,QAAQ,GAAG,CAAC,OAAO,IAAI;IACtC,SAAS;IACT,oBAAoB;IACpB,iBAAiB;IACjB,YAAY;AACd;uCAEe"}},
    {"offset": {"line": 140, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Youcef/sav-gestion-client/src/app/api/stats/route.js"],"sourcesContent":["import pool from \"@/lib/db\";\r\n\r\nexport async function GET() {\r\n  const conn = await pool.getConnection();\r\n  try {\r\n    const [statusRows] = await conn.query(\r\n      \"SELECT status, COUNT(*) as count FROM tickets GROUP BY status\",\r\n    );\r\n    const statusCounts = {};\r\n    for (const row of statusRows) statusCounts[row.status] = row.count;\r\n    for (const s of [\r\n      \"Received\",\r\n      \"Diagnostic\",\r\n      \"In Progress\",\r\n      \"Completed\",\r\n      \"Delivered\",\r\n    ]) {\r\n      statusCounts[s] = statusCounts[s] || 0;\r\n    }\r\n    const total = Object.values(statusCounts).reduce((a, b) => a + b, 0);\r\n    const [categories] = await conn.query(\r\n      \"SELECT hardware_category, COUNT(*) as count FROM tickets GROUP BY hardware_category ORDER BY count DESC\",\r\n    );\r\n    const [priorityRows] = await conn.query(\r\n      \"SELECT priority, COUNT(*) as count FROM tickets GROUP BY priority\",\r\n    );\r\n    const priorities = {};\r\n    for (const row of priorityRows) priorities[row.priority] = row.count;\r\n    const [recent] = await conn.query(\r\n      \"SELECT ticket_id, client_name, hardware_category, status, priority, created_at FROM tickets ORDER BY created_at DESC LIMIT 5\",\r\n    );\r\n    const [archivedRow] = await conn.query(\r\n      \"SELECT COUNT(*) as count FROM archives\",\r\n    );\r\n    const archived = archivedRow[0]?.count || 0;\r\n    const [todayRow] = await conn.query(\r\n      \"SELECT COUNT(*) as count FROM tickets WHERE DATE(created_at) = CURDATE()\",\r\n    );\r\n    const today = todayRow[0]?.count || 0;\r\n    return Response.json({\r\n      total_active: total,\r\n      today,\r\n      total_archived: archived,\r\n      by_status: statusCounts,\r\n      by_category: categories,\r\n      by_priority: priorities,\r\n      recent,\r\n    });\r\n  } finally {\r\n    conn.release();\r\n  }\r\n}\r\n"],"names":[],"mappings":";;;;AAAA;;AAEO,eAAe;IACpB,MAAM,OAAO,MAAM,yJAAI,CAAC,aAAa;IACrC,IAAI;QACF,MAAM,CAAC,WAAW,GAAG,MAAM,KAAK,KAAK,CACnC;QAEF,MAAM,eAAe,CAAC;QACtB,KAAK,MAAM,OAAO,WAAY,YAAY,CAAC,IAAI,MAAM,CAAC,GAAG,IAAI,KAAK;QAClE,KAAK,MAAM,KAAK;YACd;YACA;YACA;YACA;YACA;SACD,CAAE;YACD,YAAY,CAAC,EAAE,GAAG,YAAY,CAAC,EAAE,IAAI;QACvC;QACA,MAAM,QAAQ,OAAO,MAAM,CAAC,cAAc,MAAM,CAAC,CAAC,GAAG,IAAM,IAAI,GAAG;QAClE,MAAM,CAAC,WAAW,GAAG,MAAM,KAAK,KAAK,CACnC;QAEF,MAAM,CAAC,aAAa,GAAG,MAAM,KAAK,KAAK,CACrC;QAEF,MAAM,aAAa,CAAC;QACpB,KAAK,MAAM,OAAO,aAAc,UAAU,CAAC,IAAI,QAAQ,CAAC,GAAG,IAAI,KAAK;QACpE,MAAM,CAAC,OAAO,GAAG,MAAM,KAAK,KAAK,CAC/B;QAEF,MAAM,CAAC,YAAY,GAAG,MAAM,KAAK,KAAK,CACpC;QAEF,MAAM,WAAW,WAAW,CAAC,EAAE,EAAE,SAAS;QAC1C,MAAM,CAAC,SAAS,GAAG,MAAM,KAAK,KAAK,CACjC;QAEF,MAAM,QAAQ,QAAQ,CAAC,EAAE,EAAE,SAAS;QACpC,OAAO,SAAS,IAAI,CAAC;YACnB,cAAc;YACd;YACA,gBAAgB;YAChB,WAAW;YACX,aAAa;YACb,aAAa;YACb;QACF;IACF,SAAU;QACR,KAAK,OAAO;IACd;AACF"}}]
}